(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{25063:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var a=s(71729);s(43189);var l=s(66563),r=s(95268);let n=e=>{let{variant:t="primary",size:s="md",loading:n=!1,className:i,children:c,disabled:o,...d}=e;return(0,a.jsxs)("button",{className:(0,r.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-600 hover:bg-primary-700 text-white shadow-soft hover:shadow-soft-lg focus:ring-primary-500",secondary:"bg-white border border-neutral-300 hover:bg-neutral-50 text-neutral-700 shadow-soft hover:shadow-soft-lg focus:ring-primary-500",ghost:"hover:bg-neutral-100 text-neutral-600 hover:text-neutral-900 focus:ring-primary-500",destructive:"bg-destructive-600 hover:bg-destructive-700 text-white shadow-soft hover:shadow-soft-lg focus:ring-destructive-500"}[t],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg",icon:"w-10 h-10"}[s],i),disabled:o||n,...d,children:[n&&(0,a.jsx)(l.A,{className:"w-4 h-4 mr-2 animate-spin"}),c]})}},40341:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var a=s(71729);s(43189);var l=s(95268);let r=e=>{let{children:t,className:s,hover:r=!1,padding:n="md",onClick:i}=e;return(0,a.jsx)("div",{className:(0,l.cn)("bg-white rounded-xl border border-neutral-200 shadow-soft",r&&"hover:shadow-soft-lg transition-shadow duration-200",{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[n],s),onClick:i,children:t})}},57761:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(71729);s(43189);var l=s(95268);let r=e=>{let{label:t,error:s,helper:r,className:n,id:i,require:c,value:o,...d}=e;return(0,a.jsxs)("div",{className:"space-y-1",children:[t&&(0,a.jsx)("label",{htmlFor:i,className:"block text-sm font-medium text-neutral-700",children:t}),(0,a.jsx)("input",{id:i,className:(0,l.cn)("w-full px-3 py-2 rounded-lg border border-neutral-300 bg-white text-neutral-900 placeholder-neutral-400","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","transition-all duration-200",s&&"border-destructive-500 focus:ring-destructive-500",n),value:o,...d,...c?{required:!0}:{}}),s&&(0,a.jsx)("p",{className:"text-sm text-destructive-600",children:s}),r&&!s&&(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:r})]})}},71540:(e,t,s)=>{Promise.resolve().then(s.bind(s,88646))},88646:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eW});var a=s(71729),l=s(43189),r=s(63776),n=s(47024),i=s(35684),c=s(75023),o=s(95182),d=s(1564),m=s(25063),x=s(95268);let u=e=>{let{onCreateMemory:t,onToggleSidebar:s,onShowNotifications:l,syncStatus:u,notificationCount:h=0,className:p}=e,f={online:r.A,offline:n.A,syncing:r.A}[u];return(0,a.jsx)("header",{className:(0,x.cn)("bg-white border-b border-neutral-200 sticky top-2 z-40",p),children:(0,a.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(m.default,{variant:"ghost",size:"icon",onClick:s,className:"lg:hidden",children:(0,a.jsx)(i.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-600 to-secondary-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-sm",children:"ML"})}),(0,a.jsx)("h1",{className:"text-xl font-display font-bold text-neutral-900 hidden sm:block",children:"Memory Lane"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:(0,x.cn)("flex items-center space-x-2 px-2 py-1 rounded-lg text-sm","online"===u&&"text-success-700 bg-success-50","offline"===u&&"text-neutral-500 bg-neutral-50","syncing"===u&&"text-primary-700 bg-primary-50"),children:[(0,a.jsx)(f,{className:(0,x.cn)("w-4 h-4","syncing"===u&&"animate-pulse")}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"online"===u?"Synced":"offline"===u?"Offline":"Syncing..."})]}),(0,a.jsx)(m.default,{variant:"primary",size:"icon",onClick:t,className:"relative",children:(0,a.jsx)(c.A,{className:"w-5 h-5"})}),(0,a.jsxs)(m.default,{variant:"ghost",size:"icon",className:"relative",onClick:l,children:[(0,a.jsx)(o.A,{className:"w-5 h-5"}),h>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-destructive-500 text-white text-xs rounded-full flex items-center justify-center",children:h>99?"99+":h})]}),(0,a.jsx)(m.default,{onClick:()=>localStorage.setItem("route","settings"),variant:"ghost",size:"icon",children:(0,a.jsx)(d.A,{className:"w-5 h-5"})})]})]})})})};var h=s(86761),p=s(14465),f=s(8059),g=s(57729),j=s(62817),y=s(68404),v=s(74878),b=s(50134);let N={id:"user-sarah",name:"Sarah Johnson",email:"sarah@example.com",avatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=150",preferences:{theme:"light"},role:"admin"},w=[{id:"notif-1",type:"memory_shared",title:"Mom shared a memory",message:"Family Thanksgiving Dinner - What an amazing Thanksgiving we had this year!",timestamp:new Date(Date.now()-72e5).toISOString(),read:!1,avatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150"},{id:"notif-2",type:"comment",title:"Dad commented on your memory",message:"Great photo! I remember that day so well.",timestamp:new Date(Date.now()-144e5).toISOString(),read:!1},{id:"notif-3",type:"family_invite",title:"Family invitation sent",message:"Your invitation to Emma was sent successfully.",timestamp:new Date(Date.now()-864e5).toISOString(),read:!0}],k=[{id:"family-memory-1",memoryId:"family-memory-1",userId:"user-sarah",sharedBy:"user-john",memory:{id:"family-memory-1",content:"A truly special day celebrating Grandma's 90th!",title:"Grandma's 90th birthday",date:"2024-06-01",mood:"joyful",tags:["family","birthday","celebration","grandma"],images:["https://images.pexels.com/photos/1721941/pexels-photo-1721941.jpeg?auto=compress&cs=tinysrgb&w=800"],location:"Family Home, San Diego",syncStatus:"synced",createdAt:"2024-06-01T15:00:00Z",updatedAt:"2024-06-01T15:00:00Z"},user:{id:"user-john",name:"John Doe",email:"john@example.com",avatar:"https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=150"}},{id:"family-memory-2",memoryId:"family-memory-2",userId:"user-sarah",sharedBy:"user-emma",memory:{id:"family-memory-2",content:"A day filled with laughter and fun at the beach with family.",title:"Fun family beach day ",date:"2023-08-15",mood:"joyful",tags:["family","beach","fun","summer"],images:["https://images.pexels.com/photos/164077/pexels-photo-164077.jpeg?auto=compress&cs=tinysrgb&w=800"],location:"Beachside, California",syncStatus:"synced",createdAt:"2023-08-15T10:00:00Z",updatedAt:"2023-08-15T10:00:00Z"},user:{id:"user-emma",name:"Emma Smith",email:"emma@example.com",avatar:"https://images.pexels.com/photos/1183266/pexels-photo-1183266.jpeg?auto=compress&cs=tinysrgb&w=150"}},{id:"family-memory-3",memoryId:"family-memory-3",userId:"user-sarah",sharedBy:"user-john",memory:{id:"family-memory-3",content:"Another fantastic summer BBQ at the lake house.",title:"Annual family BBQ ",date:"2023-07-20",mood:"peaceful",tags:["family","summer","bbq","lake"],images:["https://images.pexels.com/photos/1482803/pexels-photo-1482803.jpeg?auto=compress&cs=tinysrgb&w=800"],location:"Lake Tahoe",syncStatus:"synced",createdAt:"2023-07-20T17:00:00Z",updatedAt:"2023-07-20T17:00:00Z"},user:{id:"user-john",name:"John Doe",email:"john@example.com",avatar:"https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=150"}}],S=[{value:"week",label:"Past 7 days"},{value:"month",label:"Past 30 days"},{value:"quarter",label:"Past 3 months"},{value:"year",label:"Past 12 months"},{value:"all",label:"All time"}],A={grateful:"bg-green-500",joyful:"bg-yellow-500",peaceful:"bg-blue-500",excited:"bg-orange-500",reflective:"bg-purple-500",nostalgic:"bg-pink-500"},C={totalMemories:247,memoriesThisMonth:18,averagePerWeek:4.2,longestStreak:12,topMoods:[{mood:"grateful",count:45,percentage:18},{mood:"joyful",count:38,percentage:15},{mood:"peaceful",count:32,percentage:13},{mood:"excited",count:28,percentage:11},{mood:"reflective",count:24,percentage:10}],topTags:[{tag:"family",count:67,percentage:27},{tag:"travel",count:43,percentage:17},{tag:"work",count:38,percentage:15},{tag:"friends",count:35,percentage:14},{tag:"hobbies",count:29,percentage:12}],monthlyActivity:[{month:"Jan",memories:15},{month:"Feb",memories:22},{month:"Mar",memories:18},{month:"Apr",memories:25},{month:"May",memories:31},{month:"Jun",memories:28},{month:"Jul",memories:35},{month:"Aug",memories:29},{month:"Sep",memories:24},{month:"Oct",memories:27},{month:"Nov",memories:18},{month:"Dec",memories:15}],weeklyPattern:[{day:"Mon",memories:12},{day:"Tue",memories:8},{day:"Wed",memories:15},{day:"Thu",memories:18},{day:"Fri",memories:22},{day:"Sat",memories:35},{day:"Sun",memories:28}]},M=[{id:"tag-1",name:"family",color:"#3B82F6",count:45},{id:"tag-2",name:"travel",color:"#10B981",count:32},{id:"tag-3",name:"work",color:"#F59E0B",count:28},{id:"tag-4",name:"friends",color:"#8B5CF6",count:24},{id:"tag-5",name:"hobbies",color:"#EF4444",count:18},{id:"tag-6",name:"milestones",color:"#14B8A6",count:15}],T=[{id:"memory-1",title:"Family Thanksgiving Dinner",content:'What an amazing Thanksgiving we had this year! The whole family gathered at Mom and Dad\'s house - all 15 of us squeezed around the extended dining room table. \n    \nUncle Mike told his famous stories again, and somehow they get funnier every year. Little Emma, now 6, insisted on saying grace and thanked God for "turkey, pie, and video games" which had everyone laughing.\n\nMom outdid herself with the cooking. The turkey was perfectly golden, and her stuffing recipe (still secret after all these years) was incredible as always. Dad carved the turkey with his usual ceremony, telling us about the "proper technique" he learned from his father.\n\nAfter dinner, we played charades in the living room. Cousin Jake\'s impression of a penguin was so ridiculous that Grandma laughed until she cried. These are the moments I want to remember forever - the laughter, the warmth, the feeling of being surrounded by people who love you unconditionally.',summary:"Wonderful family Thanksgiving gathering with 15 family members, featuring Mom's incredible cooking, Uncle Mike's stories, and hilarious charades games.",date:"2024-11-28",mood:"grateful",tags:["family","holidays","traditions","thanksgiving"],images:["https://images.pexels.com/photos/3171837/pexels-photo-3171837.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/3184465/pexels-photo-3184465.jpeg?auto=compress&cs=tinysrgb&w=800"],location:"Parents' House, Portland",syncStatus:"synced",createdAt:"2024-11-28T20:30:00Z",updatedAt:"2024-11-28T20:30:00Z",userId:"user-sarah",isPublic:!0},{id:"memory-2",title:"Sunrise Hike at Mount Hood",content:"Woke up at 4 AM for what turned out to be one of the most beautiful experiences of my life. The drive to Mount Hood was peaceful in the pre-dawn darkness, with just my favorite playlist and a thermos of coffee for company.\n\nStarting the trail in complete darkness with just my headlamp was a bit intimidating, but also thrilling. About halfway up, I met another early hiker - an elderly gentleman named Frank who's been doing sunrise hikes for 30 years. We hiked together the rest of the way, sharing stories about our favorite trails.\n\nWhen we reached the viewpoint just as the sun crested the horizon, I was completely speechless. The entire landscape was bathed in this incredible golden light, with the mountain peaks stretching endlessly in every direction. Frank and I just stood there in comfortable silence, both of us knowing we were witnessing something special.\n\nI took so many photos, but none of them captured the feeling of that moment - the crisp mountain air, the sense of accomplishment, and the pure joy of being alive in such a beautiful place.",summary:"Pre-dawn hike to Mount Hood for sunrise, meeting fellow hiker Frank and experiencing breathtaking golden light over mountain peaks.",date:"2024-11-15",mood:"peaceful",tags:["hiking","nature","sunrise","mountains","solo adventure"],images:["https://images.pexels.com/photos/1366919/pexels-photo-1366919.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800"],location:"Mount Hood, Oregon",syncStatus:"synced",createdAt:"2024-11-15T18:45:00Z",updatedAt:"2024-11-15T18:45:00Z",userId:"user-sarah",isPublic:!1},{id:"memory-3",title:"Surprise Birthday Party Success!",content:'Three weeks of secret planning finally paid off! Organizing a surprise party for Alex was more stressful than I expected, but seeing his face when he walked into the restaurant was absolutely worth every anxious moment.\n\nWe managed to get all his college friends together - some flying in from different states. The hardest part was keeping it secret from someone who notices everything. I had to create fake dinner plans and coordinate with his roommate to get him there at the right time.\n\nThe moment he opened the door and everyone yelled "Surprise!", his expression was priceless. He just stood there with his mouth open for about 10 seconds before breaking into the biggest smile. Then came the tears (happy ones, thank goodness).\n\nThe dinner was fantastic, filled with stories from college, embarrassing photo sharing, and way too much laughter. The custom photo book we made with memories from our friendship over the years was a huge hit. Alex kept flipping through it all evening, pointing out memories I\'d forgotten about.\n\nBest friend mission: accomplished!',summary:"Successfully threw a surprise birthday party for Alex with college friends flying in, featuring emotional reactions and a custom photo book.",date:"2024-10-22",mood:"joyful",tags:["friendship","birthday","surprise","celebration","planning"],images:["https://images.pexels.com/photos/1190297/pexels-photo-1190297.jpeg?auto=compress&cs=tinysrgb&w=800"],location:"Bella Vista Restaurant",syncStatus:"synced",createdAt:"2024-10-22T22:15:00Z",updatedAt:"2024-10-22T22:15:00Z",userId:"user-sarah",isPublic:!0},{id:"memory-4",title:"First Day at New Job",content:"Today marked the beginning of a new chapter in my career, and I'm feeling a mix of excitement and nerves. The office is in this beautiful historic building downtown, with huge windows and exposed brick walls that give it such character.\n\nMy manager, Jennifer, gave me the grand tour and introduced me to what seems like a hundred people. Everyone was incredibly welcoming, though I know it'll take me weeks to remember all the names. The company culture feels so different from my last job - more collaborative, more innovative.\n\nMy workspace is perfect - right by a window with a view of the city park. I spent the morning setting up my computer and going through orientation materials. Lunch was with my new team at a local caf\xe9, and they shared some inside jokes and stories that made me feel like I might actually fit in here.\n\nThe work itself looks challenging but exciting. I'll be leading the redesign of their mobile app, which is exactly the kind of project I've been hoping for. It feels good to be somewhere that values creativity and user experience.\n\nHere's to new beginnings!",summary:"First day at new job in historic downtown building, welcoming team, exciting mobile app redesign project, and positive company culture.",date:"2024-09-03",mood:"excited",tags:["work","career","new beginnings","milestone"],location:"Downtown Office Building",syncStatus:"synced",createdAt:"2024-09-03T19:00:00Z",updatedAt:"2024-09-03T19:00:00Z",userId:"user-sarah",isPublic:!1},{id:"memory-5",title:"Cooking Disaster Turned Victory",content:"Attempted to make homemade pasta from scratch for dinner tonight. What started as an ambitious culinary adventure quickly turned into what can only be described as a flour explosion in my kitchen.\n\nThe pasta dough was supposed to be smooth and elastic. Mine looked more like abstract art and had the texture of Play-Doh. After three failed attempts and flour literally everywhere - in my hair, on the walls, somehow even on the ceiling - I was ready to order pizza.\n\nBut then I remembered my grandmother's advice: \"Cooking is about love, not perfection.\" So I embraced the chaos, put on some music, and just enjoyed the process. The fourth attempt actually worked! The pasta wasn't perfectly uniform, but it had character.\n\nThe final dish - pasta with homemade pesto and roasted vegetables - was actually delicious. More importantly, the whole experience reminded me that sometimes the best memories come from things not going according to plan. Plus, I now have a newfound respect for professional pasta makers.\n\nNote to self: buy more flour.",summary:"Chaotic but ultimately successful attempt at homemade pasta, turning kitchen disaster into delicious dinner and valuable life lesson.",date:"2024-08-17",mood:"reflective",tags:["cooking","learning","perseverance","home"],images:["https://images.pexels.com/photos/1279330/pexels-photo-1279330.jpeg?auto=compress&cs=tinysrgb&w=800"],location:"Home Kitchen",syncStatus:"pending",createdAt:"2024-08-17T21:30:00Z",updatedAt:"2024-08-17T21:30:00Z",userId:"user-sarah",isPublic:!0},{id:"memory-6",title:"Late Night Call with Mom",content:"Couldn't sleep tonight, so I called Mom. It was 2 AM my time, but I knew she'd be up early getting ready for work. Sometimes you just need to hear your mother's voice.\n\nWe talked for over an hour about everything and nothing. She told me about the new flowers she planted in the garden, and I shared my worries about the presentation I have next week. She has this amazing ability to make everything seem manageable just by listening.\n\nShe also shared a story I'd never heard before about when she was my age and starting her career. Apparently, she was just as anxious and uncertain as I often feel. It's funny how parents seem invincible when you're growing up, and then you realize they're human too.\n\nBefore hanging up, she said something that really stuck with me: \"You're doing better than you think you are, sweetheart. Trust yourself.\" Sometimes that's exactly what you need to hear at 2 AM.\n\nI slept really well after that call.",summary:"Comforting late-night phone call with Mom, sharing worries and stories, receiving encouragement and wisdom about trusting yourself.",date:"2024-07-12",mood:"grateful",location:"college",tags:["family","support","conversation","wisdom","late night"],syncStatus:"synced",createdAt:"2024-07-12T09:15:00Z",updatedAt:"2024-07-12T09:15:00Z",userId:"user-sarah",isPublic:!1}],D=[{id:"user-john",name:"John Doe",email:"john@example.com",avatar:"https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=150",preferences:{theme:"system"}},{id:"user-emma",name:"Emma Smith",email:"emma@example.com",avatar:"https://images.pexels.com/photos/1183266/pexels-photo-1183266.jpeg?auto=compress&cs=tinysrgb&w=150",preferences:{theme:"dark"}}],I=e=>{let{isOpen:t,currentPage:s,onNavigate:l,onClick:r}=e,n=[{name:"Timeline",icon:h.A,id:"timeline"},{name:"Family",icon:p.A,id:"family"},{name:"Search",icon:f.A,id:"search"},{name:"Tags",icon:g.A,id:"tags"},{name:"Stories",icon:j.A,id:"stories"},{name:"Analytics",icon:y.A,id:"analytics"},{name:"Settings",icon:v.A,id:"settings"},..."admin"===N.role?[{name:"Admin",icon:b.A,id:"admin"}]:[]];return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black/50"}),(0,a.jsx)("aside",{className:(0,x.cn)("fixed inset-y-0 left-0 w-64 bg-white border-r border-neutral-200 transform transition-transform duration-200 ease-in-out","h-full overflow-y-auto z-40",t?"translate-x-0":"-translate-x-full","lg:translate-x-0 lg:z-20 lg:pt-20 lg:pb-4"),children:(0,a.jsxs)("div",{className:"flex-col h-full",children:[(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:n.map(e=>{let t=e.icon,n=s===e.id;return(0,a.jsxs)("button",{onClick:()=>{l(e.id),r()},className:(0,x.cn)("w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",n?"bg-primary-100 text-primary-900 border border-primary-200":"text-neutral-600 hover:bg-neutral-100 hover:text-neutral-900"),children:[(0,a.jsx)(t,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:e.name})]},e.id)})}),(0,a.jsx)("div",{className:"px-4 py-4 border-t border-neutral-200",children:(0,a.jsxs)("div",{className:"bg-neutral-50 rounded-lg p-4 space-y-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-neutral-900",children:"Your Stats"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-neutral-600",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Total Memories"}),(0,a.jsx)("span",{className:"font-medium",children:C.totalMemories})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"This Month"}),(0,a.jsx)("span",{className:"font-medium",children:C.memoriesThisMonth})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Per week"}),(0,a.jsxs)("span",{className:"font-medium",children:[" ",C.averagePerWeek]})]})]})]})})]})})]})};var P=s(37345),L=s(81409),E=s(5509),F=s(465),z=s(35820),O=s(14434),B=s(66235),U=s(56206),R=s(92e3),_=s(15777),J=s(40341),W=s(28493);let Y=e=>{let{children:t,variant:s="default",size:l="sm",removable:r=!1,onRemove:n,className:i,onClick:c}=e;return(0,a.jsxs)("span",{className:(0,x.cn)("inline-flex items-center rounded-full font-medium",{default:"bg-primary-100 text-primary-800 border border-primary-200",mood:"bg-accent-100 text-accent-800 border border-accent-200",category:"bg-secondary-100 text-secondary-800 border border-secondary-200"}[s],{sm:"px-2 py-1 text-xs",md:"px-3 py-1.5 text-sm"}[l],i),onClick:c,children:[t,r&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),null==n||n(),console.log("finn")},className:"ml-1 hover:bg-black/10 rounded-full p-0.5",children:(0,a.jsx)(W.A,{className:"w-3 h-3"})})]})},Z=e=>{let{memory:t,onClick:s,onEdit:i,onDelete:c,onShareMemory:o}=e,[d,u]=(0,l.useState)(!1),h=(0,l.useRef)(null),p={synced:r.A,pending:r.A,offline:n.A}[t.syncStatus||"synced"];return(0,l.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.jsx)(J.default,{hover:!0,className:"cursor-pointer",onClick:()=>{console.log("fin"),s()},children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-neutral-900 text-lg",children:t.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 mt-1 text-sm text-neutral-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(E.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:new Date(t.date).toLocaleDateString()})]}),t.location&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(F.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:t.location})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:(0,x.cn)("flex items-center","pending"===t.syncStatus&&"text-warning-600","offline"===t.syncStatus&&"text-neutral-400"),children:(0,a.jsx)(p,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{className:"relative",ref:h,children:[(0,a.jsx)(m.default,{variant:"ghost",size:"icon",className:"w-8 h-8",onClick:e=>{e.stopPropagation(),u(!d)},children:(0,a.jsx)(z.A,{className:"w-4 h-4"})}),d&&(0,a.jsx)("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white border border-neutral-200 rounded-lg shadow-soft-lg z-50",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),null==i||i(t),u(!1)},className:"w-full px-4 py-2 text-left text-sm text-neutral-700 hover:bg-neutral-50 flex items-center space-x-2",children:[(0,a.jsx)(O.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Edit Memory"})]}),(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),null==o||o(t),u(!1)},className:"w-full px-4 py-2 text-left text-sm text-neutral-700 hover:bg-neutral-50 flex items-center space-x-2",children:[t.isPublic?(0,a.jsx)(B.A,{className:"w-4 h-4"}):(0,a.jsx)(U.A,{className:"w-4 h-4"})," ",(0,a.jsx)("span",{children:t.isPublic?"Hide Memory":"Share Memory"})]}),(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),null==c||c(t.id),u(!1)},className:"w-full px-4 py-2 text-left text-sm text-destructive-600 hover:bg-destructive-50 flex items-center space-x-2",children:[(0,a.jsx)(R.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Delete Memory"})]})]})})]})]})]}),t.images&&t.images.length>0&&(0,a.jsxs)("div",{className:"aspect-video bg-neutral-100 rounded-lg overflow-hidden",children:[(0,a.jsx)("img",{src:t.images[0],alt:t.title,className:"w-full h-full object-cover"}),t.images.length>1&&(0,a.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:["+",t.images.length-1," more"]})]}),(0,a.jsxs)("p",{className:"text-neutral-600 leading-relaxed",children:[t.summary||t.content.slice(0,150),t.content.length>150&&"..."]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[t.mood&&(0,a.jsxs)("span",{className:(0,x.cn)("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border",{joyful:"bg-yellow-100 text-yellow-800 border-yellow-200",peaceful:"bg-blue-100 text-blue-800 border-blue-200",excited:"bg-orange-100 text-orange-800 border-orange-200",nostalgic:"bg-purple-100 text-purple-800 border-purple-200",grateful:"bg-green-100 text-green-800 border-green-200",reflective:"bg-gray-100 text-gray-800 border-gray-200"}[t.mood]),children:[(0,a.jsx)(_.A,{className:"w-3 h-3 mr-1"}),t.mood]}),t.tags.slice(0,3).map(e=>(0,a.jsx)(Y,{size:"sm",children:e},e)),t.tags.length>3&&(0,a.jsxs)("span",{className:"text-xs text-neutral-500",children:["+",t.tags.length-3," more"]})]}),t.isAiGenerated&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-primary-600",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-primary-600 rounded-full"}),(0,a.jsx)("span",{children:"AI"})]})]})]})})},q=e=>{let{memories:t,onMemoryClick:s,onEditMemory:r,onDeleteMemory:n,onShareMemory:i}=e,[c,o]=(0,l.useState)(new Set([2024])),[d,x]=(0,l.useState)(new Set),u=t.reduce((e,t)=>{let s=new Date(t.date),a=s.getFullYear(),l=s.getMonth(),r=s.getDate();return e[a]||(e[a]={}),e[a][l]||(e[a][l]={}),e[a][l][r]||(e[a][l][r]=[]),e[a][l][r].push(t),e},{}),h=["January","February","March","April","May","June","July","August","September","October","November","December"];return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)("div",{className:"space-y-8",children:Object.keys(u).length>0?Object.keys(u).map(Number).sort((e,t)=>t-e).map(e=>(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"sticky top-20 bg-white/90 backdrop-blur-sm z-10 py-2 border-b border-neutral-200",children:(0,a.jsxs)("button",{onClick:()=>(e=>{let t=new Set(c);t.has(e)?t.delete(e):t.add(e),o(t)})(e),className:"flex items-center space-x-2 text-2xl font-bold text-neutral-900 hover:text-primary-600 transition-colors",children:[c.has(e)?(0,a.jsx)(P.A,{className:"w-6 h-6"}):(0,a.jsx)(L.A,{className:"w-6 h-6"}),(0,a.jsx)("span",{children:e}),(0,a.jsxs)("span",{className:"text-sm font-normal text-neutral-500 ml-2",children:["(",Object.values(u[e]).reduce((e,t)=>e+Object.values(t).reduce((e,t)=>e+t.length,0),0)," ","memories)"]})]})}),c.has(e)&&(0,a.jsx)("div",{className:"space-y-6 pl-8",children:Object.keys(u[e]).map(Number).sort((e,t)=>t-e).map(t=>{let l="".concat(e,"-").concat(t);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("button",{onClick:()=>(e=>{let t=new Set(d);t.has(e)?t.delete(e):t.add(e),x(t)})(l),className:"flex items-center space-x-2 text-lg font-semibold text-neutral-700 hover:text-primary-600 transition-colors",children:[d.has(l)?(0,a.jsx)(P.A,{className:"w-5 h-5"}):(0,a.jsx)(L.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:h[t]}),(0,a.jsxs)("span",{className:"text-sm font-normal text-neutral-500 ml-2",children:["(",Object.values(u[e][t]).reduce((e,t)=>e+t.length,0)," ","memories)"]})]}),d.has(l)&&(0,a.jsx)("div",{className:"space-y-4 pl-6",children:Object.keys(u[e][t]).map(Number).sort((e,t)=>t-e).map(l=>(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-neutral-600 border-l-2 border-primary-200 pl-3",children:[h[t]," ",l]}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 pl-5",children:u[e][t][l].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).map(e=>(0,a.jsx)(Z,{memory:e,onClick:()=>{s(e)},onEdit:()=>r(e),onDelete:()=>n(e.id),onShareMemory:()=>i(e)},e.id))})]},l))})]},t)})})]},e)):(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(m.default,{variant:"secondary",size:"lg",children:"You have no memory"})})})})};var G=s(60410),H=s(68012);let Q=e=>{let{isOpen:t,onClose:s,title:r,children:n,size:i="md"}=e;return((0,l.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t)?(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:s}),(0,a.jsxs)("div",{className:(0,x.cn)("relative bg-white rounded-2xl shadow-soft-xl w-full animate-scale-in",{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"}[i]),children:[r&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-neutral-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:r}),(0,a.jsx)(m.default,{variant:"ghost",size:"icon",onClick:s,className:"text-neutral-400 hover:text-neutral-600",children:(0,a.jsx)(W.A,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:(0,x.cn)("p-6"),children:n})]})]})}):null};var V=s(57761),K=s(78849),$=s(18708);let X=e=>{let{variant:t="spinner",size:s="md",className:l}=e;return"dots"===t?(0,a.jsx)("div",{className:(0,x.cn)("flex space-x-1",l),children:[0,1,2].map(e=>(0,a.jsx)("div",{className:(0,x.cn)("bg-primary-600 rounded-full animate-dots","sm"===s?"w-1 h-1":"md"===s?"w-2 h-2":"w-3 h-3"),style:{animationDelay:"".concat(.16*e,"s")}},e))}):(0,a.jsx)("div",{className:(0,x.cn)("animate-spin rounded-full border-2 border-neutral-200 border-t-primary-600",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[s],l)})},ee=e=>{let{label:t,accept:s="image/*",multiple:r=!0,maxSize:n=10,maxFiles:i=10,files:c,onFilesChange:o,onUpload:d,className:u}=e,[h,p]=(0,l.useState)(!1),[f,g]=(0,l.useState)(!1),j=(0,l.useRef)(null),y=async e=>{let t=e.filter(e=>!(e.size>1024*n*1024)||(console.error("File ".concat(e.name," is too large")),!1));if(console.log("validFiles",t),c.length+t.length>i)return void console.error("Cannot upload more than ".concat(i," files"));let s=t.map(e=>({id:"".concat(Date.now(),"-").concat(Math.random()),name:e.name,size:e.size,type:e.type,url:URL.createObjectURL(e),progress:0}));if(o([...c,...s]),d){g(!0);try{await d(t),o([...c,...s.map(e=>({...e,progress:100}))])}catch(e){o([...c,...s.map(e=>({...e,error:"Upload failed"}))]),console.error("Upload failed",e)}finally{g(!1)}}};return(0,a.jsxs)("div",{className:(0,x.cn)("space-y-4",u),children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700",children:t}),(0,a.jsxs)("div",{onDragOver:e=>{e.preventDefault(),p(!0)},onDragLeave:e=>{e.preventDefault(),p(!1)},onDrop:e=>{e.preventDefault(),p(!1),y(Array.from(e.dataTransfer.files))},className:(0,x.cn)("border-2 border-dashed rounded-lg p-8 text-center transition-colors cursor-pointer",h?"border-primary-400 bg-primary-50":"border-neutral-300 hover:border-primary-400 hover:bg-primary-50"),onClick:()=>{var e;return null==(e=j.current)?void 0:e.click()},children:[(0,a.jsx)(G.A,{className:"w-8 h-8 text-neutral-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-neutral-600 mb-2",children:"Drag & drop files here, or click to browse"}),(0,a.jsxs)("p",{className:"text-sm text-neutral-500",children:[s.includes("image")?"images":"Files"," up to ",n,"MB each"]}),(0,a.jsx)("input",{ref:j,type:"file",accept:s,multiple:r,onChange:e=>{y(Array.from(e.target.files||[]))},className:"hidden"})]}),c.length>0&&(0,a.jsx)("div",{className:"space-y-2",children:c.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-neutral-50 rounded-lg",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:e.type.startsWith("image/")?(0,a.jsx)("div",{className:"w-10 h-10 bg-neutral-200 rounded overflow-hidden",children:(0,a.jsx)("img",{src:e.url,alt:e.name,className:"w-full h-full object-cover"})}):(0,a.jsx)("div",{className:"w-10 h-10 bg-neutral-200 rounded flex items-center justify-center",children:(0,a.jsx)(K.A,{className:"w-5 h-5 text-neutral-500"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-900 truncate",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:(e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(e.size)}),"number"==typeof e.progress&&e.progress<100&&(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("div",{className:"w-full bg-neutral-200 rounded-full h-1",children:(0,a.jsx)("div",{className:"bg-primary-600 h-1 rounded-full transition-all duration-300",style:{width:"".concat(e.progress,"%")}})})}),e.error&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 mt-1",children:[(0,a.jsx)($.A,{className:"w-3 h-3 text-destructive-500"}),(0,a.jsx)("p",{className:"text-xs text-destructive-600",children:e.error})]})]}),(0,a.jsxs)("div",{className:"flex-shrink-0",children:["number"==typeof e.progress&&e.progress<100&&!e.error&&(0,a.jsx)(X,{size:"sm"}),100===e.progress&&(0,a.jsx)("div",{className:"w-5 h-5 bg-success-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-success-600 rounded-full"})}),(0,a.jsx)(m.default,{variant:"ghost",size:"icon",onClick:t=>{var s;t.stopPropagation(),s=e.id,o(c.filter(e=>e.id!==s))},className:"w-8 h-8 text-neutral-400 hover:text-neutral-600",children:(0,a.jsx)(W.A,{className:"w-4 h-4"})})]})]},e.id))}),f&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-primary-600",children:[(0,a.jsx)(X,{size:"sm"}),(0,a.jsx)("span",{children:"Uploading files..."})]})]})},et=e=>{var t;let{isOpen:s,onClose:r,onSave:n,editingMemory:i}=e,c=(0,x.M)(),[o,d]=(0,l.useState)("content"),[u,h]=(0,l.useState)({title:(null==i?void 0:i.title)||"",content:(null==i?void 0:i.content)||"",date:(null==i?void 0:i.date)||new Date().toISOString().split("T")[0],location:(null==i?void 0:i.location)||"",mood:(null==i?void 0:i.mood)||"",tags:(null==i?void 0:i.tags)||[],images:(null==i||null==(t=i.images)?void 0:t.map(e=>({id:e,name:e.split("/").pop()||"",size:0,type:"image/jpeg",url:e})))||[]}),[p,f]=(0,l.useState)(""),[j,y]=(0,l.useState)({}),[v,b]=(0,l.useState)(!1),[N,w]=(0,l.useState)(""),[k,S]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(i){var e;h({title:i.title||"",content:i.content||"",date:i.date||new Date().toISOString().split("T")[0],location:i.location||"",mood:i.mood||"",tags:i.tags||[],images:(null==(e=i.images)?void 0:e.map(e=>({id:e,name:e.split("/").pop()||"",size:0,type:"image/jpeg",url:e})))||[]}),d("content"),y({})}else h({title:"",content:"",date:new Date().toISOString().split("T")[0],location:"",mood:"",tags:[],images:[]}),d("content");w("")},[i,s]);let A=async e=>{console.log("Simulating file upload for:",e),await new Promise(e=>setTimeout(e,1e3)),console.log("Simulated uploaded URLs:",e.map(e=>"/files/".concat(e.name)))},C=[{id:"content",label:"Content",icon:_.A},{id:"media",label:"Media",icon:G.A},{id:"metadata",label:"Details",icon:g.A}],M=async()=>{var e;let t={};if(u.title.trim()||(t.title="Title is required."),u.mood||(t.mood="Mood is required."),u.location.trim()||(t.location="Location is required."),Object.keys(t).length>0)return void y(t);y({});let s={...u,images:u.images.map(e=>e.url),id:(null==i?void 0:i.id)||"memory-".concat(Date.now()),createdAt:(null==i?void 0:i.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"pending",isPublic:null!=(e=null==i?void 0:i.isPublic)&&e};console.log("newMemory",s),h({title:"",content:"",date:new Date().toISOString().split("T")[0],location:"",mood:"",tags:[],images:[]}),c?(console.log("Attempting to save memory to backend:",s),s.syncStatus="synced"):(console.log("Saving memory to IndexedDB (offline):",s),s.syncStatus="offline",await x.db.offline_changes.add({type:i?"update":"add",collection:"memories",data:s,timestamp:Date.now()})),await x.db.memories.put(s),n(s),r()},T=()=>{p.trim()&&!u.tags.includes(p.trim())&&(h({...u,tags:[...u.tags,p.trim()]}),f(""))},D=async()=>{if(!u.title.trim()&&!u.content.trim())return;b(!0),await new Promise(e=>setTimeout(e,1500));let e="AI-generated content for: ".concat(u.title.trim()||u.content.trim(),". This is a placeholder for structured and generated text.");h(t=>({...t,content:e})),w(e),b(!1),S(!0)};return(0,a.jsx)(Q,{isOpen:s,onClose:r,title:i?"Edit Memory":"Create New Memory",size:"lg",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"border-b border-neutral-200",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8",children:C.map(e=>{let t=e.icon;return(0,a.jsx)("button",{onClick:()=>d(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(o===e.id?"border-primary-500 text-primary-600":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(t,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.label})]})},e.id)})})}),"content"===o&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(V.A,{label:"Title",value:u.title,onChange:e=>h({...u,title:e.target.value}),placeholder:"What happened?",require:!0,error:j.title}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Content"}),(0,a.jsx)("textarea",{value:u.content,onChange:e=>h({...u,content:e.target.value}),placeholder:"Tell your story...",rows:8,className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),k&&(0,a.jsxs)("div",{className:"flex space-x-2 mt-2",children:[(0,a.jsx)(m.default,{onClick:()=>{h(e=>({...e,content:N})),S(!1),w("")},variant:"primary",className:"flex-1",children:"Use AI Content"}),(0,a.jsx)(m.default,{onClick:()=>{h(e=>({...e,content:(null==i?void 0:i.content)||""})),S(!1),w("")},variant:"secondary",className:"flex-1",children:"Discard"})]}),(u.title.trim()||u.content.trim())&&!k&&(0,a.jsx)(m.default,{onClick:D,disabled:v,variant:"secondary",className:"w-full",children:v?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(H.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):"Generate content with AI"})]}),"media"===o&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(ee,{label:"Upload Photos/Videos",accept:"image/*,video/*",multiple:!0,files:u.images,onFilesChange:e=>{h(t=>({...t,images:e}))},onUpload:A})}),"metadata"===o&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(V.A,{label:"Date",type:"date",value:u.date,onChange:e=>h({...u,date:e.target.value})}),(0,a.jsx)(V.A,{label:"Location",value:u.location,onChange:e=>h({...u,location:e.target.value}),placeholder:"Where did this happen?",require:!0,error:j.location})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Mood"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[{value:"joyful",label:"Joyful",color:"bg-yellow-100 text-yellow-800"},{value:"peaceful",label:"Peaceful",color:"bg-blue-100 text-blue-800"},{value:"excited",label:"Excited",color:"bg-orange-100 text-orange-800"},{value:"nostalgic",label:"Nostalgic",color:"bg-purple-100 text-purple-800"},{value:"grateful",label:"Grateful",color:"bg-green-100 text-green-800"},{value:"reflective",label:"Reflective",color:"bg-gray-100 text-gray-800"}].map(e=>(0,a.jsx)("button",{onClick:()=>h({...u,mood:e.value}),className:"p-2 rounded-lg border-2 text-sm font-medium transition-colors ".concat(u.mood===e.value?"border-primary-500 bg-primary-50":"border-neutral-200 hover:border-neutral-300"),children:e.label},e.value))}),j.mood&&(0,a.jsx)("p",{className:"text-sm text-destructive-600 mt-1",children:j.mood})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Tags"}),(0,a.jsxs)("div",{className:"flex space-x-2 mb-2",children:[(0,a.jsx)(V.A,{value:p,onChange:e=>f(e.target.value),onKeyPress:e=>"Enter"===e.key&&T(),placeholder:"Add a tag...",className:"flex-1"}),(0,a.jsx)(m.default,{onClick:T,variant:"secondary",children:"Add"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:u.tags.map(e=>(0,a.jsx)(Y,{removable:!0,onRemove:()=>{h({...u,tags:u.tags.filter(t=>t!==e)})},children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-3 sm:space-y-0 pt-4 border-t border-neutral-200",children:[(0,a.jsxs)("p",{className:"text-sm text-neutral-500",children:[(0,a.jsx)("span",{className:"font-medium",children:"Recommendation:"})," Fill in all fields for a richer memory!"]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)(m.default,{variant:"secondary",onClick:()=>{h({title:"",content:"",date:new Date().toISOString().split("T")[0],location:"",mood:"",tags:[],images:[]})},children:"Clear"}),(0,a.jsx)(m.default,{onClick:M,children:i?"Save Changes":"Create Memory"})]})]})]})})};var es=s(49482),ea=s(87027);let el=e=>{let{memoryId:t,onBack:s,onEdit:r,onShareMemory:n}=e,[i,c]=(0,l.useState)(!1),[o,d]=(0,l.useState)(0),u=(0,ea.kk)(()=>x.db.memories.get(t),[t]);if(!u)return(0,a.jsx)("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-neutral-500",children:"Loading memory or memory not found..."})});let h=e=>{d(e),c(!0)};return(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)(m.default,{variant:"ghost",onClick:s,className:"flex items-center space-x-2",children:[(0,a.jsx)(es.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Back to Timeline"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.default,{variant:"secondary",size:"icon",onClick:()=>r(u),children:(0,a.jsx)(O.A,{className:"w-4 h-4"})}),(0,a.jsxs)(m.default,{variant:"secondary",onClick:e=>{e.stopPropagation(),null==n||n(u)},size:"icon",children:[u.isPublic?(0,a.jsx)(B.A,{className:"w-4 h-4"}):(0,a.jsx)(U.A,{className:"w-4 h-4"})," "]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(J.default,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold text-neutral-900",children:u.title}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-neutral-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(E.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:new Date(u.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),u.location&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(F.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:u.location})]}),u.mood&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(_.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ".concat({joyful:"bg-yellow-100 text-yellow-800 border-yellow-200",peaceful:"bg-blue-100 text-blue-800 border-blue-200",excited:"bg-orange-100 text-orange-800 border-orange-200",nostalgic:"bg-purple-100 text-purple-800 border-purple-200",grateful:"bg-green-100 text-green-800 border-green-200",reflective:"bg-gray-100 text-gray-800 border-gray-200"}[u.mood]),children:u.mood})]})]})]}),u.images&&u.images.length>0&&(0,a.jsx)("div",{className:"space-y-4",children:1===u.images.length?(0,a.jsx)("div",{className:"aspect-video bg-neutral-100 rounded-lg overflow-hidden cursor-pointer",onClick:()=>h(0),children:(0,a.jsx)("img",{src:u.images[0],alt:u.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200"})}):(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:u.images.map((e,t)=>(0,a.jsx)("div",{className:"aspect-square bg-neutral-100 rounded-lg overflow-hidden cursor-pointer",onClick:()=>h(t),children:(0,a.jsx)("img",{src:e,alt:"".concat(u.title," ").concat(t+1),className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200"})},t))})}),(0,a.jsx)("div",{className:"prose prose-neutral max-w-none",children:(0,a.jsx)("div",{className:"whitespace-pre-wrap text-neutral-800 leading-relaxed",children:u.content})}),u.tags&&u.tags.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 text-neutral-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-neutral-700",children:"Tags"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:u.tags.map(e=>(0,a.jsx)(Y,{children:e},e))})]})]}),u.summary&&(0,a.jsx)(J.default,{className:"bg-primary-50 border-primary-200",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-primary-600 font-bold text-sm",children:"AI"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-primary-900",children:"AI Summary"}),(0,a.jsx)("p",{className:"text-primary-800 leading-relaxed",children:u.summary})]})]})}),(0,a.jsx)(J.default,{className:"bg-neutral-50",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-neutral-700",children:"Created:"}),(0,a.jsx)("span",{className:"ml-2 text-neutral-600",children:new Date(u.createdAt).toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-neutral-700",children:"Last updated:"}),(0,a.jsx)("span",{className:"ml-2 text-neutral-600",children:new Date(u.updatedAt).toLocaleString()})]}),u.isAiGenerated&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-neutral-700",children:"AI Enhanced:"}),(0,a.jsx)("span",{className:"ml-2 text-primary-600",children:"Yes"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-neutral-700",children:"Sync Status:"}),(0,a.jsx)("span",{className:"ml-2 ".concat("synced"===u.syncStatus?"text-success-600":"pending"===u.syncStatus?"text-warning-600":"text-neutral-500"),children:"synced"===u.syncStatus?"Synced":"pending"===u.syncStatus?"Pending":"Offline"})]})]})})]})]}),(0,a.jsx)(Q,{isOpen:i,onClose:()=>c(!1),size:"full",children:(0,a.jsxs)("div",{className:"relative",children:[u.images&&(0,a.jsx)("img",{src:u.images[o],alt:"".concat(u.title," ").concat(o+1),className:"w-full h-auto max-h-screen object-contain"}),u.images&&u.images.length>1&&(0,a.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:u.images.map((e,t)=>(0,a.jsx)("button",{onClick:()=>d(t),className:"w-3 h-3 rounded-full transition-colors ".concat(t===o?"bg-white":"bg-white/50")},t))})]})})]})};var er=s(30923),en=s(4199);let ei=e=>{let{icon:t,title:s,description:l,action:r,className:n}=e;return(0,a.jsxs)("div",{className:(0,x.cn)("flex flex-col items-center justify-center text-center py-12 px-4",n),children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-neutral-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(t,{className:"w-8 h-8 text-neutral-400"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:s}),(0,a.jsx)("p",{className:"text-neutral-600 max-w-sm mb-6",children:l}),r&&(0,a.jsx)(m.default,{onClick:r.onClick,children:r.label})]})};var ec=s(40384);let eo=e=>{let{label:t,value:s,onChange:r,placeholder:n="Select date",error:i,disabled:c=!1,className:o}=e,[d,u]=(0,l.useState)(!1),[h,p]=(0,l.useState)(new Date),f=s?new Date(s):null,g=new Date,j=e=>e.toISOString().split("T")[0],y=e=>{p(t=>{let s=new Date(t);return"prev"===e?s.setMonth(t.getMonth()-1):s.setMonth(t.getMonth()+1),s})},v=(e=>{let t=e.getFullYear(),s=e.getMonth(),a=new Date(t,s,1),l=new Date(t,s+1,0).getDate(),r=a.getDay(),n=[];for(let e=0;e<r;e++)n.push(null);for(let e=1;e<=l;e++)n.push(new Date(t,s,e));return n})(h);return(0,a.jsxs)("div",{className:(0,x.cn)("relative",o),children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:t}),(0,a.jsx)("button",{type:"button",onClick:()=>!c&&u(!d),disabled:c,className:(0,x.cn)("w-full px-3 py-2 text-left bg-white border border-neutral-300 rounded-lg","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","transition-all duration-200",c&&"bg-neutral-50 text-neutral-400 cursor-not-allowed",i&&"border-destructive-500 focus:ring-destructive-500"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:(0,x.cn)(f?"text-neutral-900":"text-neutral-400"),children:f?f.toLocaleDateString():n}),(0,a.jsx)(E.A,{className:"w-4 h-4 text-neutral-400"})]})}),d&&(0,a.jsxs)("div",{className:"absolute z-50 mt-1 bg-white border border-neutral-200 rounded-lg shadow-soft-lg p-4 w-80",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(m.default,{variant:"ghost",size:"icon",onClick:()=>y("prev"),children:(0,a.jsx)(ec.A,{className:"w-4 h-4"})}),(0,a.jsxs)("h3",{className:"font-medium text-neutral-900",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][h.getMonth()]," ",h.getFullYear()]}),(0,a.jsx)(m.default,{variant:"ghost",size:"icon",onClick:()=>y("next"),children:(0,a.jsx)(L.A,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(e=>(0,a.jsx)("div",{className:"text-center text-xs font-medium text-neutral-500 py-2",children:e},e))}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1",children:v.map((e,t)=>(0,a.jsx)("div",{className:"aspect-square",children:e&&(0,a.jsx)("button",{onClick:()=>{r(j(e)),u(!1)},className:(0,x.cn)("w-full h-full rounded-lg text-sm font-medium transition-colors","hover:bg-primary-100 hover:text-primary-900",f&&j(e)===j(f)&&"bg-primary-600 text-white hover:bg-primary-700",j(e)===j(g)&&"bg-neutral-100 text-neutral-900 font-semibold"),children:e.getDate()})},t))})]}),i&&(0,a.jsx)("p",{className:"mt-1 text-sm text-destructive-600",children:i})]})};var ed=s(66653);let em=e=>{let{label:t,placeholder:s="Select options",options:r,value:n,onChange:i,error:c,disabled:o=!1,className:d}=e,[m,u]=(0,l.useState)(!1),[h,p]=(0,l.useState)(""),f=(0,l.useRef)(null),g=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&(u(!1),p(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let j=r.filter(e=>e.label.toLowerCase().includes(h.toLowerCase())),y=r.filter(e=>n.includes(e.value));return(0,a.jsxs)("div",{className:(0,x.cn)("relative",d),ref:f,children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:t}),(0,a.jsxs)("div",{className:(0,x.cn)("min-h-[2.5rem] px-3 py-2 bg-white border border-neutral-300 rounded-lg shadow-sm cursor-pointer","focus-within:outline-none focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent","transition-all duration-200",o&&"bg-neutral-50 text-neutral-400 cursor-not-allowed",c&&"border-destructive-500 focus-within:ring-destructive-500",m&&"ring-2 ring-primary-500 border-transparent"),onClick:()=>!o&&u(!0),children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 items-center",children:[y.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-primary-100 text-primary-800 text-sm rounded border border-primary-200",children:[e.label,(0,a.jsx)("button",{type:"button",onClick:t=>{var s;t.stopPropagation(),s=e.value,i(n.filter(e=>e!==s))},className:"ml-1 hover:bg-primary-200 rounded-full p-0.5",children:(0,a.jsx)(W.A,{className:"w-3 h-3"})})]},e.value)),m&&(0,a.jsx)("input",{ref:g,type:"text",value:h,onChange:e=>p(e.target.value),className:"flex-1 min-w-[120px] outline-none bg-transparent",placeholder:0===y.length?s:"",autoFocus:!0}),!m&&0===y.length&&(0,a.jsx)("span",{className:"text-neutral-400",children:s})]}),(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)(P.A,{className:(0,x.cn)("w-4 h-4 text-neutral-400 transition-transform duration-200",m&&"transform rotate-180")})})]}),m&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-neutral-200 rounded-lg shadow-soft-lg max-h-60 overflow-auto",children:0===j.length?(0,a.jsx)("div",{className:"px-3 py-2 text-sm text-neutral-500",children:"No options found"}):j.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>(e=>{n.includes(e)?i(n.filter(t=>t!==e)):i([...n,e])})(e.value),className:(0,x.cn)("w-full px-3 py-2 text-left hover:bg-neutral-50 flex items-center justify-between","first:rounded-t-lg last:rounded-b-lg",n.includes(e.value)&&"bg-primary-50 text-primary-900"),children:[(0,a.jsx)("span",{children:e.label}),n.includes(e.value)&&(0,a.jsx)(ed.A,{className:"w-4 h-4 text-primary-600"})]},e.value))}),c&&(0,a.jsx)("p",{className:"mt-1 text-sm text-destructive-600",children:c})]})},ex=e=>{let{onMemoryClick:t,onEditMemory:s,onDeleteMemory:r,onShareMemory:n}=e,[i,c]=(0,l.useState)(""),[o,d]=(0,l.useState)([]),[u,h]=(0,l.useState)(!1),[p,j]=(0,l.useState)(!1),[y,v]=(0,l.useState)([]),[b,N]=(0,l.useState)([]),[w,k]=(0,l.useState)(null),[S,A]=(0,l.useState)(null),[C]=(0,l.useState)(["family vacation","birthday party","work milestone"]),M=(0,ea.kk)(()=>x.db.memories.toArray(),[])||[],T=l.useMemo(()=>M,[M]);(0,l.useEffect)(()=>{if(i.trim()){h(!0);let e=setTimeout(()=>{d(T.filter(e=>e.title.toLowerCase().includes(i.toLowerCase())||e.content.toLowerCase().includes(i.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(i.toLowerCase()))||e.location&&e.location.toLowerCase().includes(i.toLowerCase())||e.mood&&e.mood.toLowerCase().includes(i.toLowerCase()))),h(!1)},300);return()=>clearTimeout(e)}d([]),h(!1)},[i,T]);let D=l.useMemo(()=>(i.trim()?o:T).filter(e=>{let t=new Date(e.date),s=(!w||t>=w)&&(!S||t<=S),a=0===y.length||y.every(t=>e.tags.includes(t)),l=0===b.length||e.mood&&b.includes(e.mood);return s&&a&&l}),[i,o,y,b,w,S,T]),I=Array.from(new Set(T.flatMap(e=>e.tags))),P=Array.from(new Set(T.map(e=>e.mood).filter(Boolean))),L={memories:D,tags:I.filter(e=>e.toLowerCase().includes(i.toLowerCase())),dates:[]};return(0,a.jsx)("div",{className:"min-h-fit bg-neutral-50",children:(0,a.jsx)("div",{className:"",children:(0,a.jsx)("main",{className:"flex",children:(0,a.jsxs)("div",{className:"p-6 ",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold text-neutral-900",children:"Search Memories"}),(0,a.jsx)("p",{className:"text-neutral-600 mt-1",children:"Find memories by content, tags, dates, or locations"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(V.A,{value:i,onChange:e=>c(e.target.value),placeholder:"Search memories,...",className:"pl-12 text-lg py-3"}),(0,a.jsx)(f.A,{className:"w-5 h-5 absolute left-4 top-1/2 transform -translate-y-1/2 text-neutral-400"}),u&&(0,a.jsx)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-primary-600 border-t-transparent"})})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)(m.default,{variant:"secondary",size:"sm",onClick:()=>j(!0),children:[(0,a.jsx)(er.A,{className:"w-4 h-4 mr-2"}),"Filters"]})})]}),(0,a.jsx)(Q,{isOpen:p,onClose:()=>j(!1),title:"Filter Memories",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"Date Range"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(eo,{label:"Start Date",value:w?w.toISOString().split("T")[0]:"",onChange:e=>k(e?new Date(e):null)}),(0,a.jsx)(eo,{label:"End Date",value:S?S.toISOString().split("T")[0]:"",onChange:e=>A(e?new Date(e):null)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"Tags"}),(0,a.jsx)(em,{options:I.map(e=>({label:e,value:e})),value:y,onChange:v,placeholder:"Select tags"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"Moods"}),(0,a.jsx)(em,{options:P.map(e=>({label:e,value:e})),value:b,onChange:N,placeholder:"Select moods"})]}),(0,a.jsx)("div",{className:"flex justify-end space-x-2",children:(0,a.jsx)(m.default,{variant:"secondary",onClick:()=>{v([]),N([]),k(null),A(null)},children:"Clear Filters"})})]})}),i||y.length>0||b.length>0||w||S?(0,a.jsxs)("div",{className:"mt-8 space-y-8",children:[L.memories.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-neutral-900",children:["Memories (",L.memories.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:L.memories.map(e=>(0,a.jsx)(Z,{memory:e,onClick:()=>{t(e)},onEdit:()=>s(e),onDelete:()=>r(e.id),onShareMemory:()=>{n(e)}},e.id))})]}),0===L.memories.length&&!u&&(0,a.jsx)(ei,{icon:f.A,title:"No results found",description:i.trim()?'No memories found for "'.concat(i,'". Try different keywords or check your spelling.'):S||w||b.length>0||y.length>0?"No memories match your selected filters. Try adjusting them.":"Start searching or apply filters to find your memories."})]}):(0,a.jsxs)("div",{className:"mt-8 space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-neutral-900 flex items-center",children:[(0,a.jsx)(en.A,{className:"w-5 h-5 mr-2"}),"Recent Searches"]}),(0,a.jsx)("div",{className:"space-y-2",children:C.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>c(e),className:"flex items-center space-x-3 p-3 w-full text-left hover:bg-neutral-100 rounded-lg transition-colors",children:[(0,a.jsx)(f.A,{className:"w-4 h-4 text-neutral-400"}),(0,a.jsx)("span",{className:"text-neutral-700",children:e})]},t))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-neutral-900 flex items-center",children:[(0,a.jsx)(g.A,{className:"w-5 h-5 mr-2"}),"Popular Tags"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:I.slice(0,5).map(e=>(0,a.jsx)(Y,{className:"cursor-pointer hover:bg-primary-200",onClick:()=>{c(e)},children:e},e))})]}),(0,a.jsxs)("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-primary-900 mb-3",children:"Search Tips"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm text-primary-800",children:[(0,a.jsx)("li",{children:' Use quotes for exact phrases: "family vacation"'}),(0,a.jsx)("li",{children:' Search by date: "2023" or "December"'}),(0,a.jsx)("li",{children:' Find by location: "Paris" or "home"'}),(0,a.jsx)("li",{children:' Search by mood: "joyful" or "peaceful"'})]})]})]})]})})})})},eu=e=>{var t,s;let{onMemoryClick:r,onEditMemory:n,onDeleteMemory:i,onShareMemory:c}=e,[o,d]=(0,l.useState)(null),[u,h]=(0,l.useState)(""),p=(0,ea.kk)(()=>x.db.memories.toArray(),[])||[],j=M.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())),v=o?p.filter(e=>e.tags.includes(o)):[];return(0,a.jsx)("div",{className:"min-h-fit bg-neutral-50",children:(0,a.jsx)("main",{className:"flex   ",children:(0,a.jsx)("div",{className:"p-6",children:o?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)(m.default,{variant:"ghost",onClick:()=>d(null),children:" Back to Tags"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full",style:{backgroundColor:(null==(s=M.find(e=>e.name===o))?void 0:s.color)||"#3B82F6"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold text-neutral-900",children:o}),(0,a.jsxs)("p",{className:"text-neutral-600",children:[v.length," memories with this tag"]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:v.map(e=>(0,a.jsx)(Z,{memory:e,onClick:()=>{r(e)},onEdit:()=>n(e),onDelete:()=>i(e.id),onShareMemory:()=>{c(e)}},e.id))}),0===v.length&&(0,a.jsxs)(J.default,{className:"text-center py-12",children:[(0,a.jsx)(g.A,{className:"w-12 h-12 text-neutral-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"No memories found"}),(0,a.jsxs)("p",{className:"text-neutral-600",children:['No memories are tagged with "',o,'" yet.']})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold text-neutral-900",children:"Tags & Categories"}),(0,a.jsx)("p",{className:"text-neutral-600 mt-1",children:"Explore your memories by topics and themes"})]})}),(0,a.jsxs)("div",{className:"max-w-md",children:[(0,a.jsx)(V.A,{placeholder:"Search tags...",value:u,onChange:e=>h(e.target.value),className:"pl-10"}),(0,a.jsx)(f.A,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400 pointer-events-none"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(J.default,{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center mx-auto",children:(0,a.jsx)(g.A,{className:"w-6 h-6 text-primary-600"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-neutral-900",children:M.length}),(0,a.jsx)("p",{className:"text-neutral-600",children:"Total Tags"})]}),(0,a.jsxs)(J.default,{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-secondary-100 rounded-lg flex items-center justify-center mx-auto",children:(0,a.jsx)(y.A,{className:"w-6 h-6 text-secondary-600"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-neutral-900",children:null==(t=M[0])?void 0:t.name}),(0,a.jsx)("p",{className:"text-neutral-600",children:"Most Used"})]}),(0,a.jsxs)(J.default,{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-accent-100 rounded-lg flex items-center justify-center mx-auto",children:(0,a.jsx)(E.A,{className:"w-6 h-6 text-accent-600"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-neutral-900",children:p.filter(e=>e.date.split("-")[1]==="".concat(new Date().getMonth()+1)).length}),(0,a.jsx)("p",{className:"text-neutral-600",children:"This Month"})]})]}),(0,a.jsxs)(J.default,{className:"p-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900 mb-6",children:"Tag Cloud"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-4 justify-center",children:j.map(e=>(0,a.jsx)("button",{onClick:()=>d(e.name),className:"".concat((e=>e>30?"text-2xl":e>20?"text-xl":e>10?"text-lg":"text-base")(e.count)," font-medium text-primary-600 hover:text-primary-700 transition-colors"),style:{opacity:Math.max(.4,e.count/50)},children:e.name},e.id))})]}),(0,a.jsxs)(J.default,{children:[(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:"All Tags"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(e=>(0,a.jsxs)("button",{onClick:()=>d(e.name),className:"flex items-center justify-between p-3 hover:bg-neutral-50 rounded-lg transition-colors text-left",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"font-medium text-neutral-900",children:e.name})]}),(0,a.jsx)("span",{className:"text-sm text-neutral-500",children:e.count})]},e.id))})})]})]})})})})};var eh=s(86059),ep=s(8083);let ef=e=>{let{label:t,placeholder:s="Select an option",options:r,value:n,onChange:i,error:c,disabled:o=!1,className:d}=e,[m,u]=(0,l.useState)(!1),h=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let p=r.find(e=>e.value===n);return(0,a.jsxs)("div",{className:(0,x.cn)("relative",d),ref:h,children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:t}),(0,a.jsx)("button",{type:"button",onClick:()=>!o&&u(!m),disabled:o,className:(0,x.cn)("w-full px-3 py-2 text-left bg-white border border-neutral-300 rounded-lg shadow-sm","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","transition-all duration-200",o&&"bg-neutral-50 text-neutral-400 cursor-not-allowed",c&&"border-destructive-500 focus:ring-destructive-500",m&&"ring-2 ring-primary-500 border-transparent"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:(0,x.cn)(p?"text-neutral-900":"text-neutral-400"),children:p?p.label:s}),(0,a.jsx)(P.A,{className:(0,x.cn)("w-4 h-4 text-neutral-400 transition-transform duration-200",m&&"transform rotate-180")})]})}),m&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-neutral-200 rounded-lg shadow-soft-lg max-h-60 overflow-auto",children:r.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>{i(e.value),u(!1)},className:(0,x.cn)("w-full px-3 py-2 text-left hover:bg-neutral-50 flex items-center justify-between","first:rounded-t-lg last:rounded-b-lg",n===e.value&&"bg-primary-50 text-primary-900"),children:[(0,a.jsx)("span",{children:e.label}),n===e.value&&(0,a.jsx)(ed.A,{className:"w-4 h-4 text-primary-600"})]},e.value))}),c&&(0,a.jsx)("p",{className:"mt-1 text-sm text-destructive-600",children:c})]})};var eg=s(62816),ej=s(89029);let ey=()=>{let[e,t]=(0,l.useState)({dateRange:{start:"2024-01-01",end:"2024-12-31"},tone:"reflective",length:"medium",includeimages:!0}),[s,r]=(0,l.useState)(!1),[n,i]=(0,l.useState)(null),[c,o]=(0,l.useState)(0),[d,u]=(0,l.useState)("story"),h=(0,x.M)(),p=async()=>{r(!0),o(0),i(null);let t=["Analyzing your memories...","Identifying key themes...","Crafting narrative structure...","Writing your story...","Adding finishing touches..."];for(let e=0;e<t.length;e++)await new Promise(e=>setTimeout(e,1e3)),o((e+1)/t.length*100);console.log("Settings",e),i("# A Year of Growth and Discovery\n\nAs I look back on this year, I'm struck by how much has changed and how much I've grown. It started with that nerve-wracking first day at my new job in September, walking into that beautiful historic building downtown with a mixture of excitement and anxiety coursing through my veins.\n\nThe transition wasn't always smooth. There were moments of doubt, like that late-night call with Mom in July when I needed to hear that I was doing better than I thought. Her words of wisdom - \"Trust yourself\" - became a mantra that carried me through the challenging months.\n\nBut challenges often lead to the most beautiful discoveries. That sunrise hike at Mount Hood in November reminded me of the importance of solitude and nature in my life. Meeting Frank, that elderly hiker who's been chasing sunrises for 30 years, showed me that some passions are worth pursuing for a lifetime.\n\nThe year was also filled with moments of pure joy and connection. Organizing Alex's surprise birthday party was a testament to the power of friendship and the joy that comes from giving to others. Seeing his face light up when everyone yelled \"Surprise!\" reminded me why relationships are the foundation of a meaningful life.\n\nEven my failures became victories. That cooking disaster in August, where my kitchen looked like a flour bomb had exploded, taught me that perfection isn't the goal - growth is. The pasta I finally created wasn't restaurant-quality, but it was made with love and persistence.\n\nAnd then there was Thanksgiving - that beautiful chaos of fifteen family members gathered around the extended dining room table. Uncle Mike's stories, little Emma's prayer for \"turkey, pie, and video games,\" and Grandma laughing until she cried during charades. These moments remind me that home isn't a place; it's the people who love you unconditionally.\n\nAs this year draws to a close, I'm grateful for every experience - the triumphs, the challenges, the quiet moments of reflection, and the celebrations with loved ones. Each memory has contributed to the person I'm becoming, and I'm excited to see what stories next year will bring."),r(!1)},f=async e=>{if(!n)return;let t="".concat(d,".").concat(e);if("pdf"===e){let e=new eg.uE({orientation:"portrait",unit:"mm",format:"a4"}),s=n.split("\n").filter(e=>""!==e.trim()).map(e=>e.trim()).map((e,t)=>0===t?e:e.split(". ").map(e=>e.trim()).filter(e=>e).map((e,t)=>t>0?"---- ".concat(e,"."):"".concat(e,".")).join(" ")),a=40;s.forEach(t=>{e.text(t,20,a),a+=10}),e.save(t)}else if("docx"===e){let e=new ej.yoT({sections:[{properties:{},children:[new ej.fzL({children:[new ej.NTc(n)]})]}]});ej.ND6.toBlob(e).then(e=>{let s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)})}console.log("Exporting story as ".concat(e.toUpperCase()," with filename ").concat(t))};return(0,a.jsx)("div",{className:"min-h-fit bg-neutral-50",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("main",{className:"flex",children:(0,a.jsx)("div",{className:"p-6 max-w-6xl mx-auto",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold text-neutral-900",children:"AI Story Generator"}),(0,a.jsx)("p",{className:"text-neutral-600 mt-1",children:"Create beautiful stories from your memories using AI"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-1",children:[(0,a.jsxs)(J.default,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eh.A,{className:"w-5 h-5 text-primary-600"}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-neutral-900",children:"Story Settings"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700",children:"Time Period"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)(eo,{value:e.dateRange.start,onChange:e=>t(t=>({...t,dateRange:{...t.dateRange,start:e}})),placeholder:"Start date"}),(0,a.jsx)(eo,{value:e.dateRange.end,onChange:e=>t(t=>({...t,dateRange:{...t.dateRange,end:e}})),placeholder:"End date"})]})]}),(0,a.jsx)(ef,{label:"Story Tone",options:[{value:"reflective",label:"Reflective & Thoughtful"},{value:"celebratory",label:"Celebratory & Joyful"},{value:"nostalgic",label:"Nostalgic & Warm"}],value:e.tone,onChange:e=>t(t=>({...t,tone:e}))}),(0,a.jsx)(ef,{label:"Story Length",options:[{value:"short",label:"Short (1-2 pages)"},{value:"medium",label:"Medium (3-5 pages)"},{value:"long",label:"Long (6+ pages)"}],value:e.length,onChange:e=>t(t=>({...t,length:e}))}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",id:"includeimages",checked:!1,disabled:!0,onChange:e=>t(t=>({...t,includeimages:e.target.checked})),className:"w-4 h-4 text-primary-600 border-neutral-300 rounded focus:ring-primary-500"}),(0,a.jsxs)("label",{htmlFor:"includeimages",className:"text-sm text-neutral-700",children:["Include images in story"," ",(0,a.jsx)("span",{className:"text-xs text-amber-500 font-semibold ml-1",children:"(Premium)"})]})]})]}),(0,a.jsxs)(m.default,{onClick:p,loading:s,disabled:s||!h,className:"w-full",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 mr-2"}),"Generate Story"]}),s&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-neutral-600",children:"Generating..."}),(0,a.jsxs)("span",{className:"text-neutral-600",children:[Math.round(c),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(c,"%")}})})]})]}),n&&(0,a.jsxs)(J.default,{className:"mt-6 space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-neutral-900",children:"Export Options"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(V.A,{label:"File Name",placeholder:"Enter file name",type:"text",value:d,onChange:e=>u(e.target.value)}),(0,a.jsxs)(m.default,{variant:"secondary",size:"sm",onClick:()=>f("pdf"),className:"w-full justify-start",disabled:""==d.trim(),children:[(0,a.jsx)(ep.A,{className:"w-4 h-4 mr-2"}),"Export as PDF"]}),(0,a.jsxs)(m.default,{variant:"secondary",size:"sm",onClick:()=>f("docx"),className:"w-full justify-start",disabled:""==d.trim(),children:[(0,a.jsx)(B.A,{className:"w-4 h-4 mr-2"}),"Export as Word"]})]})]})]}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)(J.default,{className:"min-h-96",children:[!n&&!s&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,a.jsx)(j.A,{className:"w-16 h-16 text-neutral-300 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"Ready to Create Your Story"}),(0,a.jsx)("p",{className:"text-neutral-600 max-w-md",children:'Configure your settings and click "Generate Story" to create a beautiful narrative from your memories.'})]}),s&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,a.jsx)(X,{size:"lg",className:"mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"Creating Your Story"}),(0,a.jsx)("p",{className:"text-neutral-600",children:"Our AI is crafting a personalized story from your memories..."})]}),n&&(0,a.jsx)("div",{className:"prose prose-neutral max-w-none",children:(0,a.jsx)("div",{className:"whitespace-pre-wrap text-neutral-800 leading-relaxed",children:n})})]})})]})]})})})})})};var ev=s(37526),eb=s(25144);let eN=e=>{let{isOpen:t,onClose:s,onConfirm:l,title:r,message:n,confirmLabel:i="Confirm",cancelLabel:c="Cancel",variant:o="default",loading:d=!1,disabled:x}=e;return(0,a.jsx)(Q,{isOpen:t,onClose:s,size:"sm",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:["destructive"===o&&(0,a.jsx)("div",{className:"w-12 h-12 bg-destructive-100 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(eb.A,{className:"w-6 h-6 text-destructive-600"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-neutral-900",children:r}),(0,a.jsx)("p",{className:"text-neutral-600",children:n})]}),(0,a.jsxs)("div",{className:"flex space-x-3 justify-center pt-4",children:[(0,a.jsx)(m.default,{variant:"secondary",onClick:s,disabled:d,children:c}),(0,a.jsx)(m.default,{variant:"destructive"===o?"destructive":"primary",onClick:l,loading:d,disabled:x||!1,children:i})]})]})})},ew=()=>{let[e,t]=(0,l.useState)("account"),[s,n]=(0,l.useState)(!1),[i,c]=(0,l.useState)(!1),[o,u]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[f,g]=(0,l.useState)(300),j=(0,x.M)(),y=(0,ea.kk)(()=>x.db.userSettings.get("settings"),[])||null,[v,b]=(0,l.useState)(()=>y?(console.log("from dexie",y),y):{id:"settings",name:N.name,syncStatus:"synced",userId:"user-sarah",email:N.email,avatar:N.avatar,preferences:N.preferences});(0,l.useEffect)(()=>{if(y)b(y);else{let e={id:"settings",userId:N.id,email:N.email,name:N.name,preferences:{theme:N.preferences.theme},syncStatus:"synced"};x.db.userSettings.put(e)}},[y]),(0,l.useEffect)(()=>{let e;return i&&f>0&&(e=setInterval(()=>{g(e=>e-1)},1e3)),()=>clearInterval(e)},[i,f]);let w=[{id:"account",label:"Account",icon:d.A},{id:"sync",label:"Sync & Backup",icon:r.A},{id:"appearance",label:"Appearance",icon:ev.A},{id:"data",label:"Data & Export",icon:B.A}],k=[{value:"light",label:"Light"},{value:"dark",label:"Dark"},{value:"system",label:"System"}],S=async e=>{let t={...e};await x.db.userSettings.put(t),j||await x.db.offline_changes.add({type:"update",collection:"userSettings",data:t,timestamp:Date.now()}),b(t),console.log("Settings",t)};return(0,a.jsxs)("div",{className:"min-h-fit bg-neutral-50",children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("main",{className:"",children:(0,a.jsx)("div",{className:"p-6 max-w-6xl mx-auto",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold text-neutral-900",children:"Settings"}),(0,a.jsx)("p",{className:"text-neutral-600 mt-1",children:"Manage your account, privacy, and preferences"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(J.default,{className:"p-4",children:(0,a.jsx)("nav",{className:"space-y-1",children:w.map(s=>{let l=s.icon;return(0,a.jsxs)("button",{onClick:()=>t(s.id),className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors text-left ".concat(e===s.id?"bg-primary-100 text-primary-900 border border-primary-200":"text-neutral-600 hover:bg-neutral-100 hover:text-neutral-900"),children:[(0,a.jsx)(l,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:s.label})]},s.id)})})})}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsx)(J.default,{className:"p-6",children:(()=>{switch(e){case"account":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900 mb-4",children:"Account Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(V.A,{label:"Full Name",value:v.name,onChange:e=>b(t=>({...t,name:e.target.value}))}),(0,a.jsxs)("div",{children:[(0,a.jsx)(V.A,{label:"Email",value:v.email,disabled:!0,onChange:e=>b(t=>({...t,email:e.target.value}))}),(0,a.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"Email address cannot be changed"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-3",children:"Profile Picture"}),(0,a.jsx)(ee,{label:"Upload Profile Picture",files:v.avatar?[{id:"current-avatar",name:"Profile Picture",size:0,type:"image/*",url:v.avatar}]:[],onFilesChange:e=>{let t=e.length>0?e[0].url:void 0;b(e=>({...e,avatar:t}))},onUpload:async e=>{if(e.length>0){let t=e[0],s=URL.createObjectURL(t);b(e=>({...e,avatar:s})),console.log("Simulating avatar upload:",t.name)}},className:"max-w-xs",multiple:!1,maxFiles:1})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-neutral-200",children:(0,a.jsx)(m.default,{onClick:()=>S({...v,name:v.name,email:v.email,avatar:v.avatar}),children:"Save Changes"})})]});case"sync":return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900 mb-4",children:"Sync & Backup"}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-blue-200 rounded-lg bg-blue-50",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-blue-900",children:"Auto Backup"}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"All memories are automatically backed up"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:!0,className:"sr-only peer",disabled:!0}),(0,a.jsx)("div",{className:"w-11 h-6 bg-neutral-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})})]})});case"appearance":return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900 mb-4",children:"Appearance"}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(ef,{label:"Theme",options:k,value:v.preferences.theme,onChange:e=>S({...v,preferences:{...v.preferences,theme:e}})})})]})});case"data":return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900 mb-4",children:"Data & Export"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-neutral-200 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-neutral-900",children:"Export All Data"}),(0,a.jsx)("p",{className:"text-sm text-neutral-600",children:"Download all your memories and data"})]}),(0,a.jsxs)(m.default,{variant:"secondary",size:"sm",children:[(0,a.jsx)(B.A,{className:"w-4 h-4 mr-2"}),"Export"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-destructive-200 rounded-lg bg-destructive-50",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-destructive-900",children:"Delete Account"}),(0,a.jsx)("p",{className:"text-sm text-destructive-700",children:"Permanently delete your account and all data"})]}),(0,a.jsxs)(m.default,{variant:"destructive",size:"sm",onClick:()=>n(!0),children:[(0,a.jsx)(R.A,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})});default:return null}})()})})]})]})})})}),(0,a.jsx)(eN,{isOpen:s,onClose:()=>n(!1),onConfirm:()=>{n(!1),c(!0),g(300),u(""),p(""),console.log("Simulating sending verification code to",v.email)},title:"Delete Account",message:"This will permanently delete your account and all your memories. This action cannot be undone.",confirmLabel:"Delete Account",variant:"destructive"}),(0,a.jsx)(Q,{isOpen:i,onClose:()=>c(!1),size:"sm",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-destructive-100 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(R.A,{className:"w-6 h-6 text-destructive-600"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-neutral-900",children:"Verify Account Deletion"}),(0,a.jsxs)("p",{className:"text-neutral-600",children:["A verification code has been sent to ",v.email,". Please enter the code below. The code will expire in ",(e=>{let t=Math.floor(e/60),s=e%60;return"".concat(t,":").concat(s<10?"0":"").concat(s)})(f),"."]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(V.A,{label:"Verification Code",value:o,onChange:e=>u(e.target.value),placeholder:"Enter 6-digit code"}),h&&(0,a.jsx)("p",{className:"text-sm text-destructive-600",children:h}),0===f&&(0,a.jsx)("p",{className:"text-sm text-destructive-600",children:"The verification code has expired. Please request a new code."})]}),(0,a.jsxs)("div",{className:"flex space-x-3 justify-center pt-4",children:[(0,a.jsx)(m.default,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),(0,a.jsx)(m.default,{variant:"destructive",onClick:()=>{"123456"===o?(console.log("Account deleted successfully"),c(!1),console.log("Redirecting to / route"),window.location.href="/"):p("Invalid verification code")},disabled:0===f||6!==o.length,children:"Verify and Delete"})]})]})})]})};var ek=s(39770),eS=s(73719),eA=s(71534);let eC=e=>{let{title:t,value:s,change:l,icon:r,className:n}=e;return(0,a.jsxs)(J.default,{className:(0,x.cn)("space-y-4",n),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(r,{className:"w-6 h-6 text-primary-600"})}),l&&(0,a.jsx)("div",{className:(0,x.cn)("text-sm font-medium","up"===l.trend&&"text-success-600","down"===l.trend&&"text-destructive-600","neutral"===l.trend&&"text-neutral-600"),children:l.value})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-neutral-900",children:s}),(0,a.jsx)("p",{className:"text-neutral-600 text-sm",children:t})]})]})},eM=()=>{let[e,t]=(0,l.useState)("overview"),s={totalUsers:1247,activeUsers:892,totalMemories:15432,storageUsed:"2.4 TB"},r=e=>{switch(e){case"info":return"text-primary-600 bg-primary-100";case"warning":return"text-warning-600 bg-warning-100";case"error":return"text-destructive-600 bg-destructive-100"}};return(0,a.jsx)("div",{className:"min-h-fit bg-neutral-50",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("main",{className:"flex",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold text-neutral-900",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-neutral-600 mt-1",children:"System monitoring and management"})]}),(0,a.jsx)("div",{className:"bg-destructive-100 border border-destructive-200 rounded-lg px-3 py-1",children:(0,a.jsx)("span",{className:"text-destructive-800 text-sm font-medium",children:"Admin Only"})})]}),(0,a.jsx)("div",{className:"border-b border-neutral-200",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Overview",icon:ek.A},{id:"jobs",label:"Job Queue",icon:eS.A},{id:"logs",label:"System Logs",icon:eA.A}].map(s=>{let l=s.icon;return(0,a.jsxs)("button",{onClick:()=>t(s.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(e===s.id?"border-primary-500 text-primary-600":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300"),children:[(0,a.jsx)(l,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:s.label})]},s.id)})})}),"overview"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(eC,{title:"Total Users",value:s.totalUsers.toLocaleString(),icon:p.A,change:{value:"+12%",trend:"up"}}),(0,a.jsx)(eC,{title:"Active Users",value:s.activeUsers.toLocaleString(),icon:ek.A,change:{value:"+8%",trend:"up"}}),(0,a.jsx)(eC,{title:"Total Memories",value:s.totalMemories.toLocaleString(),icon:eA.A,change:{value:"+156",trend:"up"}}),(0,a.jsx)(eC,{title:"Storage Used",value:s.storageUsed,icon:eA.A,change:{value:"+0.2TB",trend:"up"}})]}),(0,a.jsxs)(J.default,{children:[(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:"System Health"})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-700",children:"API Response Time"}),(0,a.jsx)("span",{className:"text-success-600 font-medium",children:"142ms"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-700",children:"Database Connections"}),(0,a.jsx)("span",{className:"text-success-600 font-medium",children:"8/20"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-700",children:"Memory Usage"}),(0,a.jsx)("span",{className:"text-warning-600 font-medium",children:"78%"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-700",children:"Disk Usage"}),(0,a.jsx)("span",{className:"text-success-600 font-medium",children:"45%"})]})]})]})]}),"jobs"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:"Job Queue"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(m.default,{variant:"secondary",size:"sm",children:[(0,a.jsx)(eS.A,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,a.jsxs)(m.default,{variant:"secondary",size:"sm",children:[(0,a.jsx)(R.A,{className:"w-4 h-4 mr-2"}),"Clear Completed"]})]})]}),(0,a.jsx)(J.default,{children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-neutral-50 border-b border-neutral-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Job ID"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-neutral-200",children:[{id:"job-1",type:"ai_summary",status:"processing",createdAt:"2024-01-15T10:30:00Z"},{id:"job-2",type:"image_processing",status:"completed",createdAt:"2024-01-15T10:25:00Z",completedAt:"2024-01-15T10:28:00Z"},{id:"job-3",type:"backup",status:"failed",createdAt:"2024-01-15T10:20:00Z",error:"Storage quota exceeded"}].map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-neutral-900",children:e.id}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-900",children:e.type.replace("_"," ")}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(e){case"pending":return"text-warning-600 bg-warning-100";case"processing":return"text-primary-600 bg-primary-100";case"completed":return"text-success-600 bg-success-100";case"failed":return"text-destructive-600 bg-destructive-100"}})(e.status)),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-500",children:new Date(e.createdAt).toLocaleString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,a.jsx)(m.default,{variant:"ghost",size:"sm",children:"View Details"})})]},e.id))})]})})})]}),"logs"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:"System Logs"}),(0,a.jsxs)(m.default,{variant:"secondary",size:"sm",children:[(0,a.jsx)(eS.A,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),(0,a.jsx)(J.default,{children:(0,a.jsx)("div",{className:"space-y-4 p-6",children:[{id:"log-1",level:"info",message:"User authentication successful",timestamp:"2024-01-15T10:35:00Z",userId:"user-123"},{id:"log-2",level:"warning",message:"High memory usage detected",timestamp:"2024-01-15T10:32:00Z"},{id:"log-3",level:"error",message:"Failed to process image upload",timestamp:"2024-01-15T10:30:00Z",userId:"user-456"}].map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-4 p-4 border border-neutral-200 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full mt-2 ".concat(r(e.level).split(" ")[1])}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded ".concat(r(e.level)),children:e.level.toUpperCase()}),(0,a.jsx)("span",{className:"text-sm text-neutral-500",children:new Date(e.timestamp).toLocaleString()}),e.userId&&(0,a.jsxs)("span",{className:"text-sm text-neutral-500",children:["User: ",e.userId]})]}),(0,a.jsx)("p",{className:"text-sm text-neutral-900",children:e.message})]})]},e.id))})})]})]})})})})})};var eT=s(77686);let eD=()=>{let[e,t]=(0,l.useState)("year"),s=((e,t)=>{let s=new Date,a=new Date;switch(t){case"week":a.setDate(s.getDate()-7);break;case"month":a.setMonth(s.getMonth()-1);break;case"quarter":a.setMonth(s.getMonth()-3);break;case"year":a.setFullYear(s.getFullYear()-1);break;default:return e}return e.filter(e=>{let t=new Date(e.date);return t>=a&&t<=s})})(T,e),r={totalMemories:s.length,memoriesThisMonth:s.filter(e=>{let t=new Date(e.date);return t.getMonth()===new Date().getMonth()&&t.getFullYear()===new Date().getFullYear()}).length,averagePerWeek:parseFloat((s.length/52*4).toFixed(1)),longestStreak:0,topMoods:[],topTags:[],monthlyActivity:[],weeklyPattern:[]};r.topMoods=(e=>{let t={};e.forEach(e=>{t[e.mood]=(t[e.mood]||0)+1});let s=e.length;return Object.entries(t).map(e=>{let[t,a]=e;return{mood:t,count:a,percentage:s>0?parseFloat((a/s*100).toFixed(0)):0}}).sort((e,t)=>t.count-e.count).slice(0,5)})(s),r.topTags=(e=>{let t={};e.forEach(e=>{e.tags.forEach(e=>{t[e]=(t[e]||0)+1})});let s=e.length;return Object.entries(t).map(e=>{let[t,a]=e;return{tag:t,count:a,percentage:s>0?parseFloat((a/s*100).toFixed(0)):0}}).sort((e,t)=>t.count-e.count).slice(0,5)})(s),r.monthlyActivity=(e=>{let t={},s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return e.forEach(e=>{let a=s[new Date(e.date).getMonth()];t[a]=(t[a]||0)+1}),s.map(e=>({month:e,memories:t[e]||0}))})(s),r.weeklyPattern=(e=>{let t={},s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.forEach(e=>{let a=s[new Date(e.date).getDay()];t[a]=(t[a]||0)+1}),s.map(e=>({day:e,memories:t[e]||0}))})(s);let n="all"===e?C:r;return(0,a.jsx)("div",{className:"min-h-fit bg-neutral-50",children:(0,a.jsx)("div",{className:"",children:(0,a.jsx)("main",{className:"",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold text-neutral-900",children:"Analytics & Insights"}),(0,a.jsx)("p",{className:"text-neutral-600 mt-1",children:"Discover patterns and insights from your memories"})]}),(0,a.jsx)("div",{className:"w-48",children:(0,a.jsx)(ef,{options:S,value:e,onChange:t,placeholder:"Select time range"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(eC,{title:"Total Memories",value:n.totalMemories.toLocaleString(),icon:E.A,change:{value:"+12%",trend:"up"}}),(0,a.jsx)(eC,{title:"This Month",value:n.memoriesThisMonth.toString(),icon:y.A,change:{value:"+3",trend:"up"}}),(0,a.jsx)(eC,{title:"Weekly Average",value:n.averagePerWeek.toString(),icon:eT.A,change:{value:"+0.5",trend:"up"}}),(0,a.jsx)(eC,{title:"Longest Streak",value:"".concat(n.longestStreak," days"),icon:en.A,change:{value:"Personal best!",trend:"up"}})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(J.default,{children:[(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:"Monthly Activity"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"space-y-4",children:n.monthlyActivity.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-8 text-sm text-neutral-600 font-medium",children:e.month}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.memories/35*100,"%")}})})}),(0,a.jsx)("div",{className:"w-8 text-sm text-neutral-900 font-medium text-right",children:e.memories})]},e.month))})})]}),(0,a.jsxs)(J.default,{children:[(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:"Weekly Pattern"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"space-y-4",children:n.weeklyPattern.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-8 text-sm text-neutral-600 font-medium",children:e.day}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-secondary-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.memories/35*100,"%")}})})}),(0,a.jsx)("div",{className:"w-8 text-sm text-neutral-900 font-medium text-right",children:e.memories})]},e.day))})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(J.default,{children:[(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(_.A,{className:"w-5 h-5 text-primary-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:"Top Moods"})]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"space-y-4",children:n.topMoods.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full ".concat(A[e.mood])}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-neutral-900 capitalize",children:e.mood}),(0,a.jsxs)("span",{className:"text-sm text-neutral-600",children:[e.count," (",e.percentage,"%)"]})]}),(0,a.jsx)("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(A[e.mood]),style:{width:"".concat(e.percentage,"%")}})})]})]},e.mood))})})]}),(0,a.jsxs)(J.default,{children:[(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.A,{className:"w-5 h-5 text-primary-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:"Top Tags"})]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"space-y-4",children:n.topTags.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded bg-primary-600"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-neutral-900",children:e.tag}),(0,a.jsxs)("span",{className:"text-sm text-neutral-600",children:[e.count," (",e.percentage,"%)"]})]}),(0,a.jsx)("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.percentage,"%")}})})]})]},e.tag))})})]})]}),(0,a.jsx)(J.default,{className:"bg-gradient-to-r from-primary-50 to-secondary-50 border-primary-200",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-600 to-secondary-600 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(y.A,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-neutral-900",children:"AI Insights"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-neutral-700",children:[(0,a.jsx)("p",{children:" You're most active on weekends, with 63% more memories created"}),(0,a.jsx)("p",{children:" Your happiest memories often include the 'family' and 'travel' tags"}),(0,a.jsx)("p",{children:" You've been consistently grateful this month - 40% of memories have a grateful mood"}),(0,a.jsx)("p",{children:" Your memory creation has increased 23% compared to last quarter"})]})]})]})})})]})})})})})};var eI=s(4145),eP=s(34735);let eL=()=>{var e;let[t,s]=(0,l.useState)("all"),[r,n]=(0,l.useState)(""),[i,c]=(0,l.useState)(null),[o,d]=(0,l.useState)(!1),[u,h]=(0,l.useState)([]),[f,g]=(0,l.useState)([]),[j,y]=(0,l.useState)(null),[v,b]=(0,l.useState)(null),w=(0,ea.kk)(()=>x.db.memories.where({userId:"user-sarah"}).toArray(),[])||[],S=(0,ea.kk)(()=>x.db.likes.toArray(),[])||[],A=(0,ea.kk)(()=>x.db.comments.toArray(),[])||[],C=l.useMemo(()=>w,[w]),M=e=>{if(e===N.id)return{id:N.id,name:N.name,avatar:N.avatar,relationship:"You"};let t=D.find(t=>t.id===e);return t?{id:t.id,name:t.name,avatar:t.avatar,relationship:"Family"}:{id:e,name:"Unknown User",avatar:void 0,relationship:""}},T=l.useMemo(()=>{let e=(e,t)=>{let s=S.filter(t=>t.memoryId===e.id),a=A.filter(t=>t.memoryId===e.id),l=s.some(e=>e.userId===N.id);return{...e,sharedBy:t,sharedAt:e.updatedAt||e.createdAt,comments:a.map(e=>({id:e.id,author:M(e.userId),content:e.content,createdAt:new Date(e.timestamp).toISOString(),syncStatus:e.syncStatus})),reactions:s.map(e=>({id:e.id,author:M(e.userId),type:"heart",syncStatus:e.syncStatus})),isLikedByCurrentUser:l}};return[...C.filter(e=>e.isPublic).map(t=>e(t,{name:N.name,avatar:N.avatar,relationship:"You",id:N.id})),...k.map(t=>e(t.memory,{name:t.user.name,avatar:t.user.avatar,id:t.user.id,relationship:"Family"}))].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())},[C,S,A]),I=T.filter(e=>{let s="all"===t||e.sharedBy.id===t,a=new Date(e.date),l=(!j||a>=j)&&(!v||a<=v),r=0===u.length||u.every(t=>e.tags.includes(t)),n=0===f.length||e.mood&&f.includes(e.mood);return s&&l&&r&&n}),P=Array.from(new Set(T.flatMap(e=>e.tags))),L=Array.from(new Set(T.map(e=>e.mood).filter(Boolean))),E=(0,x.M)(),F=async e=>{if(r.trim()){let t={id:"comment-".concat(Date.now()),memoryId:e,userId:N.id,content:r.trim(),timestamp:Date.now(),syncStatus:E?"synced":"pending"};console.log("Attempting to add comment:",t),E?console.log("Simulating API call to add comment:",t):(console.log("Queueing offline comment:",t),await x.db.offline_changes.add({type:"add",collection:"comments",data:t,timestamp:Date.now()})),await x.db.comments.add(t),n(""),c(null)}},z=async e=>{let t=S.find(t=>t.memoryId===e&&t.userId===N.id);if(t)console.log("Attempting to unlike memory:",e),E?console.log("Simulating API call to remove reaction:",t.id):(console.log("Queueing offline unlike for:",t.id),await x.db.offline_changes.add({type:"delete",collection:"likes",data:t,timestamp:Date.now()})),await x.db.likes.delete(t.id);else{let t={id:"like-".concat(Date.now()),memoryId:e,userId:N.id,timestamp:Date.now(),syncStatus:E?"synced":"pending"};E?console.log("Simulating API call to add reaction:",t):(console.log("Queueing offline reaction:",t),await x.db.offline_changes.add({type:"add",collection:"likes",data:t,timestamp:Date.now()})),await x.db.likes.add(t)}},O=async e=>{let t=A.find(t=>t.id===e);t&&(E?console.log("Simulating API call to delete comment:",t.id):(console.log("Queueing offline delete for comment:",t.id),await x.db.offline_changes.add({type:"delete",collection:"comments",data:t,timestamp:Date.now()})),await x.db.comments.delete(t.id),console.log("Comment deleted:",t.id))};return(0,a.jsx)("div",{className:"min-h-fit bg-neutral-50",children:(0,a.jsx)("div",{className:"p-9",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold text-neutral-900",children:"Family Timeline"}),(0,a.jsx)("p",{className:"text-neutral-600 mt-1",children:"Memories shared by your family members"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)(m.default,{variant:"secondary",size:"sm",onClick:()=>d(!0),children:[(0,a.jsx)(er.A,{className:"w-4 h-4 mr-2"}),"Filters"]})})]}),(0,a.jsx)(Q,{isOpen:o,onClose:()=>d(!1),title:"Filter Memories",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"Date Range"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(eo,{label:"Start Date",value:j?j.toISOString().split("T")[0]:"",onChange:e=>y(e?new Date(e):null)}),(0,a.jsx)(eo,{label:"End Date",value:v?v.toISOString().split("T")[0]:"",onChange:e=>b(e?new Date(e):null)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"Tags"}),(0,a.jsx)(em,{options:P.map(e=>({label:e,value:e})),value:u,onChange:h,placeholder:"Select tags"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"Moods"}),(0,a.jsx)(em,{options:L.map(e=>({label:e,value:e})),value:f,onChange:g,placeholder:"Select moods"})]}),(0,a.jsx)("div",{className:"flex justify-end space-x-2",children:(0,a.jsx)(m.default,{variant:"secondary",onClick:()=>{h([]),g([]),y(null),b(null)},children:"Clear Filters"})})]})}),(0,a.jsx)(J.default,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-neutral-700",children:"Show memories from:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>s("all"),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat("all"===t?"bg-primary-100 text-primary-800 border border-primary-200":"bg-neutral-100 text-neutral-600 hover:bg-neutral-200"),children:"All Family"}),D.map(e=>(0,a.jsxs)("button",{onClick:()=>s(e.id),className:"flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat(t===e.id?"bg-primary-100 text-primary-800 border border-primary-200":"bg-neutral-100 text-neutral-600 hover:bg-neutral-200"),children:[e.avatar?(0,a.jsx)("img",{src:e.avatar,alt:e.name,className:"w-5 h-5 rounded-full"}):(0,a.jsx)("div",{className:"w-5 h-5 bg-neutral-300 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs text-neutral-600",children:e.name[0]})}),(0,a.jsx)("span",{children:e.name})]},e.id))]})]})}),(0,a.jsx)("div",{className:"space-y-6",children:I.length>0?I.map(e=>(0,a.jsxs)(J.default,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 pb-3 border-b border-neutral-200",children:[e.sharedBy.avatar?(0,a.jsx)("img",{src:e.sharedBy.avatar,alt:e.sharedBy.name,className:"w-10 h-10 rounded-full"}):(0,a.jsx)("div",{className:"w-10 h-10 bg-neutral-200 rounded-full flex items-center justify-center",children:(0,a.jsx)(p.A,{className:"w-5 h-5 text-neutral-500"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h3",{className:"font-medium text-neutral-900",children:e.sharedBy.name}),(0,a.jsx)("span",{className:"text-sm text-neutral-500",children:"shared a memory"})]}),(0,a.jsxs)("p",{className:"text-sm text-neutral-500",children:[new Date(e.sharedAt).toLocaleDateString()," "," ",e.sharedBy.relationship]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900 mb-2",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-neutral-500 mb-3",children:[(0,a.jsx)("span",{children:new Date(e.date).toLocaleDateString()}),e.location&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:""}),(0,a.jsx)("span",{children:e.location})]})]})]}),e.images&&e.images.length>0&&(0,a.jsx)("div",{className:"aspect-video bg-neutral-100 rounded-lg overflow-hidden",children:(0,a.jsx)("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover"})}),(0,a.jsx)("p",{className:"text-neutral-700 leading-relaxed",children:e.content.length>300?"".concat(e.content.slice(0,300),"..."):e.content}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[e.mood&&(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:[(0,a.jsx)(_.A,{className:"w-3 h-3 mr-1"}),e.mood]}),e.tags.slice(0,3).map(e=>(0,a.jsx)(Y,{size:"sm",children:e},e))]})]}),(0,a.jsxs)("div",{className:"pt-3 border-t border-neutral-200 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>z(e.id),className:"flex items-center space-x-1 text-sm transition-colors ".concat(e.isLikedByCurrentUser?"text-red-600":"text-neutral-600 hover:text-red-600"),children:[(0,a.jsx)(_.A,{className:"w-4 h-4 ".concat(e.isLikedByCurrentUser?"fill-red-600":"")}),(0,a.jsx)("span",{children:e.reactions.length})]}),(0,a.jsxs)("button",{onClick:()=>c(i===e.id?null:e.id),className:"flex items-center space-x-1 text-sm text-neutral-600 hover:text-primary-600 transition-colors",children:[(0,a.jsx)(eI.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.comments.length})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-1",children:e.reactions.slice(0,3).map((e,t)=>(0,a.jsx)("div",{className:"flex items-center",children:e.author.avatar?(0,a.jsx)("img",{src:e.author.avatar,alt:e.author.name,className:"w-6 h-6 rounded-full border-2 border-white",style:{marginLeft:t>0?"-8px":"0"}}):(0,a.jsx)("div",{className:"w-6 h-6 bg-neutral-200 rounded-full border-2 border-white flex items-center justify-center",style:{marginLeft:t>0?"-8px":"0"},children:(0,a.jsx)("span",{className:"text-xs text-neutral-600",children:e.author.name[0]})})},e.id))})]}),e.comments.length>0&&(0,a.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto scrollbar-thin scrollbar-thumb-neutral-200 scrollbar-track-neutral-50",children:e.comments.map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 group relative",children:[e.author.avatar?(0,a.jsx)("img",{src:e.author.avatar,alt:e.author.name,className:"w-8 h-8 rounded-full"}):(0,a.jsx)("div",{className:"w-8 h-8 bg-neutral-200 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs text-neutral-600",children:e.author.name[0]})}),(0,a.jsxs)("div",{className:"flex-1 bg-neutral-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("span",{className:"font-medium text-neutral-900 text-sm",children:e.author.name}),(0,a.jsx)("span",{className:"text-xs text-neutral-500",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,a.jsx)("p",{className:"text-sm text-neutral-700",children:e.content})]}),e.author.id===N.id&&(0,a.jsx)("button",{onClick:()=>O(e.id),className:"absolute top-2 right-2 text-neutral-400 hover:text-destructive-600 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(eP.A,{className:"w-4 h-4"})})]},e.id))}),i===e.id&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-primary-600",children:"You"})}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)(V.A,{value:r,onChange:e=>n(e.target.value),placeholder:"Add a comment...",onKeyPress:t=>"Enter"===t.key&&F(e.id)}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.default,{size:"sm",onClick:()=>F(e.id),disabled:!r.trim(),children:"Comment"}),(0,a.jsx)(m.default,{variant:"ghost",size:"sm",onClick:()=>c(null),children:"Cancel"})]})]})]})]})]},e.id)):D.length>0?(0,a.jsxs)(J.default,{className:"text-center py-12",children:[(0,a.jsx)(p.A,{className:"w-12 h-12 text-neutral-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"No memory found"})]}):(0,a.jsxs)(J.default,{className:"text-center py-12",children:[(0,a.jsx)(p.A,{className:"w-12 h-12 text-neutral-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"No shared memories yet"}),(0,a.jsx)("p",{className:"text-neutral-600 mb-4",children:"all"===t?"Your family hasn't shared any memories yet.":"".concat(null==(e=D.find(e=>e.id===t))?void 0:e.name," hasn't shared any memories yet.")}),(0,a.jsx)(m.default,{variant:"secondary",onClick:()=>localStorage.setItem("route","settings"),children:"Invite Family Members"})]})})]})})})};var eE=s(56880);let eF=()=>{let[e,t]=(0,l.useState)(!1),[s,r]=(0,l.useState)(N),[n,i]=(0,l.useState)("overview"),c=T.slice(0,6),o={totalMemories:247,memoriesThisMonth:18,longestStreak:12,favoriteTag:"family",topMood:"grateful",joinedDate:"2023-03-15"};return(0,a.jsx)("div",{className:"min-h-fit bg-neutral-50",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("main",{className:"flex",children:(0,a.jsx)("div",{className:"p-6 max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(J.default,{className:"relative overflow-hidden",children:[(0,a.jsx)("div",{className:"h-32 bg-gradient-to-r from-primary-400 to-secondary-400"}),(0,a.jsx)("div",{className:"relative px-6 pb-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-end sm:space-x-6 -mt-16",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-32 h-32 bg-white rounded-full p-2 shadow-soft-lg",children:s.avatar?(0,a.jsx)("img",{src:s.avatar,alt:s.name,className:"w-full h-full rounded-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full rounded-full bg-neutral-200 flex items-center justify-center",children:(0,a.jsx)(d.A,{className:"w-12 h-12 text-neutral-400"})})}),(0,a.jsx)("button",{onClick:()=>{console.log("Avatar change requested")},className:"absolute bottom-2 right-2 w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white hover:bg-primary-700 transition-colors",children:(0,a.jsx)(eE.A,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"flex-1 mt-4 sm:mt-0",children:e?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(V.A,{value:s.name,onChange:e=>r(t=>({...t,name:e.target.value})),className:"text-2xl font-bold"}),(0,a.jsx)(V.A,{value:s.email,onChange:e=>r(t=>({...t,email:e.target.value}))})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-neutral-900",children:s.name}),(0,a.jsx)("p",{className:"text-neutral-600",children:s.email}),(0,a.jsxs)("p",{className:"text-sm text-neutral-500 mt-1",children:["Member since"," ",new Date(o.joinedDate).toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]})}),(0,a.jsx)("div",{className:"flex space-x-2 mt-4 sm:mt-0",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.default,{onClick:()=>{t(!1)},children:"Save"}),(0,a.jsx)(m.default,{variant:"secondary",onClick:()=>t(!1),children:"Cancel"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(m.default,{variant:"secondary",onClick:()=>t(!0),children:[(0,a.jsx)(O.A,{className:"w-4 h-4 mr-2"}),"Edit Profile"]}),(0,a.jsxs)(m.default,{variant:"secondary",children:[(0,a.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Settings"]})]})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(eC,{title:"Total Memories",value:o.totalMemories.toString(),icon:E.A}),(0,a.jsx)(eC,{title:"This Month",value:o.memoriesThisMonth.toString(),icon:_.A}),(0,a.jsx)(eC,{title:"Longest Streak",value:"".concat(o.longestStreak," days"),icon:y.A}),(0,a.jsx)(eC,{title:"Favorite Tag",value:o.favoriteTag,icon:g.A})]}),(0,a.jsx)("div",{className:"border-b border-neutral-200",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Overview"},{id:"memories",label:"Recent Memories"},{id:"stats",label:"Statistics"}].map(e=>(0,a.jsx)("button",{onClick:()=>i(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(n===e.id?"border-primary-500 text-primary-600":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300"),children:e.label},e.id))})}),"overview"===n&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)(J.default,{children:[(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:"Recent Activity"})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-primary-600 rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-neutral-600",children:'Created "Family Thanksgiving Dinner" 2 hours ago'})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-secondary-600 rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-neutral-600",children:'Added 3 photos to "Sunrise Hike" yesterday'})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-accent-600 rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-neutral-600",children:'Shared "Birthday Party" with family 3 days ago'})]})]})]}),(0,a.jsxs)(J.default,{children:[(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:"Favorite Memories"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.slice(0,4).map(e=>(0,a.jsx)("div",{className:"aspect-video bg-neutral-100 rounded-lg overflow-hidden",children:e.images&&e.images[0]&&(0,a.jsx)("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover"})},e.id))})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(J.default,{children:[(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-neutral-900",children:"Profile Stats"})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-600",children:"Top Mood"}),(0,a.jsx)("span",{className:"font-medium text-neutral-900 capitalize",children:o.topMood})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-600",children:"Most Used Tag"}),(0,a.jsx)("span",{className:"font-medium text-neutral-900",children:o.favoriteTag})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-600",children:"Current Streak"}),(0,a.jsx)("span",{className:"font-medium text-neutral-900",children:"5 days"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-600",children:"Average per Week"}),(0,a.jsx)("span",{className:"font-medium text-neutral-900",children:"4.2"})]})]})]}),(0,a.jsxs)(J.default,{children:[(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-neutral-900",children:"Quick Actions"})}),(0,a.jsxs)("div",{className:"p-6 space-y-3",children:[(0,a.jsxs)(m.default,{variant:"secondary",size:"sm",className:"w-full justify-start",children:[(0,a.jsx)(B.A,{className:"w-4 h-4 mr-2"}),"Export All Data"]}),(0,a.jsxs)(m.default,{variant:"secondary",size:"sm",className:"w-full justify-start",children:[(0,a.jsx)(U.A,{className:"w-4 h-4 mr-2"}),"Share Profile"]}),(0,a.jsxs)(m.default,{variant:"secondary",size:"sm",className:"w-full justify-start",children:[(0,a.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Privacy Settings"]})]})]})]})]}),"memories"===n&&(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:c.map(e=>(0,a.jsx)(Z,{memory:e,onClick:()=>{}},e.id))}),"stats"===n&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(J.default,{className:"text-center space-y-4",children:[(0,a.jsx)(E.A,{className:"w-12 h-12 text-primary-600 mx-auto"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-neutral-900",children:o.totalMemories}),(0,a.jsx)("p",{className:"text-neutral-600",children:"Total Memories"})]})]}),(0,a.jsxs)(J.default,{className:"text-center space-y-4",children:[(0,a.jsx)(_.A,{className:"w-12 h-12 text-red-500 mx-auto"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-neutral-900",children:o.memoriesThisMonth}),(0,a.jsx)("p",{className:"text-neutral-600",children:"This Month"})]})]}),(0,a.jsxs)(J.default,{className:"text-center space-y-4",children:[(0,a.jsx)(g.A,{className:"w-12 h-12 text-secondary-600 mx-auto"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-neutral-900",children:"34"}),(0,a.jsx)("p",{className:"text-neutral-600",children:"Unique Tags"})]})]})]})]})})})})})};var ez=s(80764),eO=s(32292),eB=s(57543);let eU=()=>{let[e,t]=(0,l.useState)("private"),[s,r]=(0,l.useState)(!1),[n,i]=(0,l.useState)(""),[c,o]=(0,l.useState)(""),[d,x]=(0,l.useState)([{id:"family-1",name:"Nana",email:"mom@family.com",avatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150",relationship:"Mother"},{id:"family-2",name:"George",email:"dad@family.com",relationship:"Father"},{id:"family-3",name:"Dorcas",email:"sister@family.com",relationship:"Sister"}]);return(0,a.jsxs)("div",{className:"min-h-fit bg-neutral-50",children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("main",{className:"flex",children:(0,a.jsx)("div",{className:"p-6 max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold text-neutral-900",children:"Privacy & Sharing"}),(0,a.jsx)("p",{className:"text-neutral-600 mt-1",children:"Control who can see your memories and how they're shared"})]}),(0,a.jsxs)(J.default,{children:[(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(b.A,{className:"w-5 h-5 text-primary-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:"Privacy Mode"})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("private"===e?"border-primary-300 bg-primary-50":"border-neutral-200 hover:border-neutral-300"),onClick:()=>t("private"),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-primary-600 flex items-center justify-center mt-0.5",children:"private"===e&&(0,a.jsx)("div",{className:"w-3 h-3 bg-primary-600 rounded-full"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ez.A,{className:"w-4 h-4 text-neutral-600"}),(0,a.jsx)("h3",{className:"font-medium text-neutral-900",children:"Private (Recommended)"})]}),(0,a.jsx)("p",{className:"text-sm text-neutral-600 mt-1",children:"Only you can see your memories. Full encryption and privacy protection."})]})]})}),(0,a.jsx)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("family"===e?"border-primary-300 bg-primary-50":"border-neutral-200 hover:border-neutral-300"),onClick:()=>t("family"),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-primary-600 flex items-center justify-center mt-0.5",children:"family"===e&&(0,a.jsx)("div",{className:"w-3 h-3 bg-primary-600 rounded-full"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 text-neutral-600"}),(0,a.jsx)("h3",{className:"font-medium text-neutral-900",children:"Family Timeline"})]}),(0,a.jsx)("p",{className:"text-sm text-neutral-600 mt-1",children:"Share memories automatically with invited family members."})]})]})}),(0,a.jsx)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("selective"===e?"border-primary-300 bg-primary-50":"border-neutral-200 hover:border-neutral-300"),onClick:()=>t("selective"),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-primary-600 flex items-center justify-center mt-0.5",children:"selective"===e&&(0,a.jsx)("div",{className:"w-3 h-3 bg-primary-600 rounded-full"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eO.A,{className:"w-4 h-4 text-neutral-600"}),(0,a.jsx)("h3",{className:"font-medium text-neutral-900",children:"Selective Sharing"})]}),(0,a.jsx)("p",{className:"text-sm text-neutral-600 mt-1",children:"Choose which memories to share on a case-by-case basis."})]})]})})]})]}),("family"===e||"selective"===e)&&(0,a.jsxs)(J.default,{children:[(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.A,{className:"w-5 h-5 text-primary-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:"Family Members"})]}),(0,a.jsxs)(m.default,{onClick:()=>r(!0),size:"sm",children:[(0,a.jsx)(eB.A,{className:"w-4 h-4 mr-2"}),"Invite Member"]})]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"space-y-4",children:d.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-4 border border-neutral-200 rounded-lg",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-neutral-200 rounded-full overflow-hidden flex-shrink-0",children:e.avatar?(0,a.jsx)("img",{src:e.avatar,alt:e.name,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(p.A,{className:"w-6 h-6 text-neutral-400"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("h3",{className:"font-medium text-neutral-900",children:e.name})}),(0,a.jsx)("p",{className:"text-sm text-neutral-600",children:e.email}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:e.relationship})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)(m.default,{variant:"ghost",size:"sm",onClick:()=>{var t;return t=e.id,void x(e=>e.filter(e=>e.id!==t))},className:"text-destructive-600 hover:text-destructive-700",children:"Remove"})})]},e.id))})})]}),(0,a.jsxs)(J.default,{children:[(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:"Default Sharing Settings"})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-neutral-900",children:"Auto-share new memories"}),(0,a.jsx)("p",{className:"text-sm text-neutral-600",children:"Automatically share new memories based on your privacy mode"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",defaultChecked:"family"===e,className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-neutral-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-neutral-900",children:"Allow family comments"}),(0,a.jsx)("p",{className:"text-sm text-neutral-600",children:"Let family members add comments to your memories"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-neutral-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-neutral-900",children:"Email notifications"}),(0,a.jsx)("p",{className:"text-sm text-neutral-600",children:"Get notified when family members interact with your memories"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-neutral-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(m.default,{children:"Save Privacy Settings"})})]})})})}),(0,a.jsx)(eN,{isOpen:s,onClose:()=>r(!1),onConfirm:()=>{n&&c&&(x([...d,{id:"family-".concat(Date.now()),name:n.split("@")[0],email:n,relationship:c}]),i(""),o(""),r(!1))},title:"Invite Family Member",message:"",confirmLabel:"Send Invitation",cancelLabel:"Cancel",children:(0,a.jsxs)("div",{className:"space-y-4 text-left",children:[(0,a.jsx)(V.A,{label:"Email Address",type:"email",value:n,onChange:e=>i(e.target.value),placeholder:"family@example.com"}),(0,a.jsx)(ef,{label:"Relationship",options:[{value:"parent",label:"Parent"},{value:"sibling",label:"Sibling"},{value:"spouse",label:"Spouse/Partner"},{value:"child",label:"Child"},{value:"grandparent",label:"Grandparent"},{value:"other",label:"Other Family"}],value:c,onChange:o,placeholder:"Select relationship"}),(0,a.jsx)("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-3",children:(0,a.jsx)("p",{className:"text-sm text-primary-800",children:"They'll receive an email invitation to join your family timeline and can view memories you choose to share."})})]})})]})};var eR=s(89386);let e_=e=>{let{isVisible:t,onRetry:s,className:l}=e;return t?(0,a.jsx)("div",{className:(0,x.cn)("bg-warning-50 border-b border-warning-200 px-4 py-3","animate-slide-in w-full z-1000 ",l),children:(0,a.jsxs)("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(eR.A,{className:"w-5 h-5 text-warning-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-warning-800",children:"You're offline"}),(0,a.jsx)("p",{className:"text-xs text-warning-700",children:"Some features may be limited until you reconnect"})]})]}),s&&(0,a.jsxs)(m.default,{variant:"ghost",size:"sm",onClick:s,className:"text-warning-700 hover:text-warning-800 hover:bg-warning-100",children:[(0,a.jsx)(eS.A,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):null},eJ=e=>{let{notifications:t,onMarkAsRead:s,onMarkAllAsRead:r,onClose:n,isOpen:i}=e,[c,d]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{if(i)d(!0);else{let e=setTimeout(()=>d(!1),200);return()=>clearTimeout(e)}},[i]),!c)return null;let u=t.filter(e=>!e.read).length;return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[(0,a.jsx)("div",{className:(0,x.cn)("absolute inset-0 bg-black/20 transition-opacity duration-200",i?"opacity-100":"opacity-0"),onClick:n}),(0,a.jsxs)("div",{className:(0,x.cn)("absolute right-4 top-20 w-96 max-w-[calc(100vw-2rem)] bg-white rounded-xl shadow-soft-xl border border-neutral-200 transition-all duration-200",i?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.A,{className:"w-5 h-5 text-neutral-600"}),(0,a.jsx)("h3",{className:"font-semibold text-neutral-900",children:"Notifications"}),u>0&&(0,a.jsx)("span",{className:"bg-primary-600 text-white text-xs px-2 py-1 rounded-full",children:u})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[u>0&&(0,a.jsx)(m.default,{variant:"ghost",size:"sm",onClick:r,className:"text-xs",children:"Mark all read"}),(0,a.jsx)(m.default,{variant:"ghost",size:"icon",onClick:n,className:"w-8 h-8",children:(0,a.jsx)(W.A,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===t.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)(o.A,{className:"w-12 h-12 text-neutral-300 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-neutral-500",children:"No notifications yet"})]}):(0,a.jsx)("div",{className:"divide-y divide-neutral-100",children:t.map(e=>{let t=(e=>{switch(e){case"memory_shared":return U.A;case"comment":return eI.A;case"reaction":case"memory_liked":return _.A;case"family_invite":return eB.A;default:return o.A}})(e.type),l=(e=>{switch(e){case"memory_shared":return"text-primary-600";case"comment":return"text-blue-600";case"reaction":case"memory_liked":return"text-red-600";case"family_invite":return"text-green-600";default:return"text-neutral-600"}})(e.type);return(0,a.jsx)("div",{className:(0,x.cn)("p-4 hover:bg-neutral-50 cursor-pointer transition-colors",!e.read&&"bg-primary-50/50"),onClick:()=>s(e.id),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[e.avatar?(0,a.jsx)("img",{src:e.avatar,alt:"",className:"w-10 h-10 rounded-full"}):(0,a.jsx)("div",{className:"w-10 h-10 bg-neutral-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(t,{className:(0,x.cn)("w-5 h-5",l)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"font-medium text-neutral-900 text-sm",children:e.title}),!e.read&&(0,a.jsx)("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})]}),(0,a.jsx)("p",{className:"text-sm text-neutral-600 mt-1",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-neutral-500 mt-2",children:new Date(e.timestamp).toLocaleDateString()})]})]})},e.id)})})})]})]})},eW=function(){let[e,t]=(0,l.useState)("timeline"),[s,r]=(0,l.useState)(!1),[n,i]=(0,l.useState)(!1),c=(0,x.M)(),[o,d]=(0,l.useState)(null),[m,h]=(0,l.useState)(null),p=(0,ea.kk)(()=>x.db.memories.toArray(),[])||[],[f,g]=(0,l.useState)(!1),[j,y]=(0,l.useState)(w);(0,l.useEffect)(()=>{(async()=>{0===await x.db.memories.count()&&T.forEach(async e=>{await x.db.memories.put(e)})})()},[]),(0,l.useEffect)(()=>{c&&v()},[c]),(0,l.useEffect)(()=>{setInterval(()=>{localStorage.getItem("route")&&(t(localStorage.getItem("route")),localStorage.removeItem("route"))},1e3)});let v=async()=>{console.log("Attempting to sync offline changes...");let e=await x.db.offline_changes.toArray();for(let t of(console.log(e),e))try{switch(console.log("Syncing ".concat(t.type," for ").concat(t.collection," with data:"),t.data),t.collection){case"memories":let e={...t.data,syncStatus:"synced"};await x.db.memories.put(e);break;case"likes":let s={...t.data,syncStatus:"synced"};await x.db.likes.put(s);break;case"comments":let a={...t.data,syncStatus:"synced"};await x.db.comments.put(a);break;case"userSettings":let l={...t.data,syncStatus:"synced"};await x.db.userSettings.put(l);break;default:console.warn("Unknown collection type for sync:",t.collection);continue}await x.db.offline_changes.delete(t.id)}catch(e){console.error("Error syncing offline change:",t,e)}},b=e=>{h(e.id)},N=e=>{d(e),i(!0),h(null)},k=async e=>{if(!window.confirm("Are you sure you want to delete this memory?"))return;console.log("Attempting to delete memory:",e);let t=p.find(t=>t.id===e);if(!t)return void console.error("Memory not found for deletion:",e);c?console.log("Simulating backend delete for memory:",e):(console.log("Queueing offline delete for memory:",e),await x.db.offline_changes.add({type:"delete",collection:"memories",data:{...t,syncStatus:"pending"},timestamp:Date.now()})),await x.db.memories.delete(e)},S=async e=>{let t={...e,isPublic:!e.isPublic,updatedAt:new Date().toISOString(),syncStatus:c?"synced":"offline"};c?console.log("Simulating backend update for memory share status:",t.id):(console.log("Queueing offline update for memory share status:",t.id),await x.db.offline_changes.add({type:"update",collection:"memories",data:t,timestamp:Date.now()})),await x.db.memories.put(t)};return m?(0,a.jsx)(el,{memoryId:m,onBack:()=>{h(null)},onEdit:N,onShareMemory:S}):(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[(0,a.jsx)(u,{onCreateMemory:()=>i(!0),onToggleSidebar:()=>r(!s),onShowNotifications:()=>g(!f),syncStatus:c?"online":"offline",notificationCount:j.filter(e=>!e.read).length}),(0,a.jsx)(e_,{isVisible:!c}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(I,{isOpen:s,currentPage:e,onNavigate:t,onClick:()=>r(!1)}),(0,a.jsxs)("main",{className:"flex-1 lg:ml-64",children:["timeline"===e&&(0,a.jsx)("div",{className:"min-h-fit bg-neutral-50",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold text-neutral-900",children:"Your Timeline"}),(0,a.jsx)("p",{className:"text-neutral-600 mt-1",children:"Explore your memories organized by time"})]})}),(0,a.jsx)(q,{memories:p,onMemoryClick:b,onEditMemory:N,onDeleteMemory:k,onShareMemory:S})]})})}),"search"===e&&(0,a.jsx)(ex,{onMemoryClick:b,onEditMemory:N,onDeleteMemory:k,onShareMemory:S}),"tags"===e&&(0,a.jsx)(eu,{onMemoryClick:b,onEditMemory:N,onDeleteMemory:k,onShareMemory:S}),"stories"===e&&(0,a.jsx)(ey,{}),"settings"===e&&(0,a.jsx)(ew,{}),"family"===e&&(0,a.jsx)(eL,{}),"privacy"===e&&(0,a.jsx)(eU,{}),"analytics"===e&&(0,a.jsx)(eD,{}),"admin"===e&&(0,a.jsx)(eM,{}),"profile"===e&&(0,a.jsx)(eF,{})]})]}),(0,a.jsx)(et,{isOpen:n,onClose:()=>{i(!1),d(null)},onSave:e=>{x.db.memories.add(e)},editingMemory:o||void 0}),(0,a.jsx)(eJ,{notifications:j,onMarkAsRead:e=>{y(t=>t.map(t=>t.id===e?{...t,read:!0}:t))},onMarkAllAsRead:()=>{y(e=>e.map(e=>({...e,read:!0})))},onClose:()=>g(!1),isOpen:f}),s&&(0,a.jsx)("div",{className:"fixed inset-0 z-30 bg-black opacity-50 lg:hidden",onClick:()=>r(!1)})]})}},95268:(e,t,s)=>{"use strict";s.d(t,{M:()=>c,cn:()=>i,db:()=>d});var a=s(46170),l=s(63838),r=s(43189),n=s(98370);let i=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,a.$)(t))};function c(){let[e,t]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",s),t(navigator.onLine),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}},[]),e}class o extends n.Ay{constructor(){super("MemoryLaneDatabase"),this.version(1).stores({memories:"id, title, content, summary, date, mood, tags, images, location, isAiGenerated, syncStatus, createdAt, updatedAt, isPublic, userId",offline_changes:"++id, type, collection, timestamp",likes:"id, memoryId, userId, timestamp, syncStatus",comments:"id, memoryId, userId, content, timestamp, syncStatus",userSettings:"id, userId, preferences, syncStatus"})}}let d=new o}},e=>{e.O(0,[405,570,390,188,598,340,358],()=>e(e.s=71540)),_N_E=e.O()}]);